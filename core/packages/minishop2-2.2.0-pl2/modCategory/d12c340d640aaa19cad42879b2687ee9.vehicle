<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      'b24e867b26f4d485d1560e4527f3aa08' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProducts.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"row ms2_product\\">\\r\\n\\t<div class=\\"span2 col-md-2\\"><img src=\\"[[+thumb:default=`[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_small.png`]]\\" width=\\"120\\" height=\\"90\\" \\/><\\/div>\\r\\n\\t<div class=\\"row span10 col-md-10\\">\\r\\n\\t\\t<form method=\\"post\\" class=\\"ms2_form\\">\\r\\n\\t\\t\\t<a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a>\\r\\n\\t\\t\\t<span class=\\"flags\\">[[+new]] [[+popular]] [[+favorite]]<\\/span>\\r\\n\\t\\t\\t<span class=\\"price\\">[[+price]] [[%ms2_frontend_currency]]<\\/span>\\r\\n\\t\\t\\t[[+old_price]]\\r\\n\\t\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/add\\"><i class=\\"glyphicon glyphicon-barcode\\"><\\/i> [[%ms2_frontend_add_to_cart]]<\\/button>\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"[[+id]]\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"count\\" value=\\"1\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"options\\" value=\\"[]\\">\\r\\n\\t\\t<\\/form>\\r\\n\\t\\t<p><small>[[+introtext]]<\\/small><\\/p>\\r\\n\\t<\\/div>\\r\\n<\\/div>\\r\\n<br\\/><br\\/>\\r\\n<!--minishop2_popular <i class=\\"glyphicon glyphicon-star\\" title=\\"[[%ms2_frontend_popular]]\\"><\\/i>-->\\r\\n<!--minishop2_new <i class=\\"glyphicon glyphicon-flag\\" title=\\"[[%ms2_frontend_new]]\\"><\\/i>-->\\r\\n<!--minishop2_favorite <i class=\\"glyphicon glyphicon-bookmark\\" title=\\"[[%ms2_frontend_favorite]]\\"><\\/i>-->\\r\\n<!--minishop2_old_price <span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_products_row.tpl","content":"<div class=\\"row ms2_product\\">\\r\\n\\t<div class=\\"span2 col-md-2\\"><img src=\\"[[+thumb:default=`[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_small.png`]]\\" width=\\"120\\" height=\\"90\\" \\/><\\/div>\\r\\n\\t<div class=\\"row span10 col-md-10\\">\\r\\n\\t\\t<form method=\\"post\\" class=\\"ms2_form\\">\\r\\n\\t\\t\\t<a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a>\\r\\n\\t\\t\\t<span class=\\"flags\\">[[+new]] [[+popular]] [[+favorite]]<\\/span>\\r\\n\\t\\t\\t<span class=\\"price\\">[[+price]] [[%ms2_frontend_currency]]<\\/span>\\r\\n\\t\\t\\t[[+old_price]]\\r\\n\\t\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/add\\"><i class=\\"glyphicon glyphicon-barcode\\"><\\/i> [[%ms2_frontend_add_to_cart]]<\\/button>\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"[[+id]]\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"count\\" value=\\"1\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"options\\" value=\\"[]\\">\\r\\n\\t\\t<\\/form>\\r\\n\\t\\t<p><small>[[+introtext]]<\\/small><\\/p>\\r\\n\\t<\\/div>\\r\\n<\\/div>\\r\\n<br\\/><br\\/>\\r\\n<!--minishop2_popular <i class=\\"glyphicon glyphicon-star\\" title=\\"[[%ms2_frontend_popular]]\\"><\\/i>-->\\r\\n<!--minishop2_new <i class=\\"glyphicon glyphicon-flag\\" title=\\"[[%ms2_frontend_new]]\\"><\\/i>-->\\r\\n<!--minishop2_favorite <i class=\\"glyphicon glyphicon-bookmark\\" title=\\"[[%ms2_frontend_favorite]]\\"><\\/i>-->\\r\\n<!--minishop2_old_price <span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>-->"}',
        'guid' => 'fce730a76b71394903a3d6c19b8efe52',
        'native_key' => 0,
        'signature' => '90f1cb9e60cba538004119dd297b6f65',
      ),
      '91f1ab440a7abd3a878e0cb5fcd9177b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msCart.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<tr id=\\"[[+key]]\\">\\r\\n\\t<td class=\\"image\\"><img src=\\"[[+thumb:default=`[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_small.png`]]\\" \\/><\\/td>\\r\\n\\t<td class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><br\\/>\\r\\n\\t\\t<small><i>[[+option.color]] [[+option.size]]<\\/i><\\/small>\\r\\n\\t<\\/td>\\r\\n\\t<td class=\\"count\\">\\r\\n\\t\\t<form method=\\"post\\" class=\\"ms2_form form-inline\\" role=\\"form\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"key\\" value=\\"[[+key]]\\" \\/>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<input type=\\"number\\" name=\\"count\\" value=\\"[[+count]]\\" max-legth=\\"4\\" class=\\"input-sm form-control\\" \\/>\\r\\n\\t\\t\\t\\t[[%ms2_frontend_count_unit]]\\r\\n\\t\\t\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/change\\"><i class=\\"glyphicon glyphicon-refresh\\"><\\/i><\\/button>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/form>\\r\\n\\t<\\/td>\\r\\n\\t<td class=\\"weight\\"><span>[[+weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/td>\\r\\n\\t<td class=\\"price\\"><span>[[+price]]<\\/span> [[%ms2_frontend_currency]][[+old_price]]<\\/td>\\r\\n\\t<td class=\\"remove\\">\\r\\n\\t\\t<form method=\\"post\\" class=\\"ms2_form\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"key\\" value=\\"[[+key]]\\">\\r\\n\\t\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\" title=\\"[[%ms2_cart_remove]]\\"><i class=\\"glyphicon glyphicon-remove\\"><\\/i><\\/button>\\r\\n\\t\\t<\\/form>\\r\\n\\t<\\/td>\\r\\n<\\/tr>\\r\\n<!--minishop2_option.color [[%ms2_frontend_color]]: [[+option.color]];-->\\r\\n<!--minishop2_option.size [[%ms2_frontend_size]]: [[+option.size]];-->\\r\\n<!--minishop2_old_price <br\\/><span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_cart_row.tpl","content":"<tr id=\\"[[+key]]\\">\\r\\n\\t<td class=\\"image\\"><img src=\\"[[+thumb:default=`[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_small.png`]]\\" \\/><\\/td>\\r\\n\\t<td class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><br\\/>\\r\\n\\t\\t<small><i>[[+option.color]] [[+option.size]]<\\/i><\\/small>\\r\\n\\t<\\/td>\\r\\n\\t<td class=\\"count\\">\\r\\n\\t\\t<form method=\\"post\\" class=\\"ms2_form form-inline\\" role=\\"form\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"key\\" value=\\"[[+key]]\\" \\/>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<input type=\\"number\\" name=\\"count\\" value=\\"[[+count]]\\" max-legth=\\"4\\" class=\\"input-sm form-control\\" \\/>\\r\\n\\t\\t\\t\\t[[%ms2_frontend_count_unit]]\\r\\n\\t\\t\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/change\\"><i class=\\"glyphicon glyphicon-refresh\\"><\\/i><\\/button>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/form>\\r\\n\\t<\\/td>\\r\\n\\t<td class=\\"weight\\"><span>[[+weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/td>\\r\\n\\t<td class=\\"price\\"><span>[[+price]]<\\/span> [[%ms2_frontend_currency]][[+old_price]]<\\/td>\\r\\n\\t<td class=\\"remove\\">\\r\\n\\t\\t<form method=\\"post\\" class=\\"ms2_form\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"key\\" value=\\"[[+key]]\\">\\r\\n\\t\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/remove\\" title=\\"[[%ms2_cart_remove]]\\"><i class=\\"glyphicon glyphicon-remove\\"><\\/i><\\/button>\\r\\n\\t\\t<\\/form>\\r\\n\\t<\\/td>\\r\\n<\\/tr>\\r\\n<!--minishop2_option.color [[%ms2_frontend_color]]: [[+option.color]];-->\\r\\n<!--minishop2_option.size [[%ms2_frontend_size]]: [[+option.size]];-->\\r\\n<!--minishop2_old_price <br\\/><span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>-->"}',
        'guid' => 'fbc129e1bde299b05149a5e791407c8d',
        'native_key' => 0,
        'signature' => '7c1d378b310236ca72f1912577bc50d4',
      ),
      '6481559fb6ecc42b31faeae93f02ab15' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msCart.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_price]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"remove span2 col-md-2\\">[[%ms2_cart_remove]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+total_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+total_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+total_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t\\t<th>&nbsp;<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<form method=\\"post\\">\\r\\n\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\" title=\\"[[%ms2_cart_clean]]\\"><i class=\\"glyphicon glyphicon-remove\\"><\\/i> [[%ms2_cart_clean]]<\\/button>\\r\\n\\t<\\/form>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_cart_outer.tpl","content":"<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_price]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"remove span2 col-md-2\\">[[%ms2_cart_remove]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+total_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+total_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+total_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t\\t<th>&nbsp;<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<form method=\\"post\\">\\r\\n\\t\\t<button class=\\"btn btn-default\\" type=\\"submit\\" name=\\"ms2_action\\" value=\\"cart\\/clean\\" title=\\"[[%ms2_cart_clean]]\\"><i class=\\"glyphicon glyphicon-remove\\"><\\/i> [[%ms2_cart_clean]]<\\/button>\\r\\n\\t<\\/form>\\r\\n<\\/div>"}',
        'guid' => '10be5b0fff23150ee0f08bdb50713b13',
        'native_key' => 0,
        'signature' => '9b8651de0710be0aa7319f87a659e6dd',
      ),
      '224fc8a2550cce97a2b4e3511e2a51d0' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msCart.empty","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ms2_cart_is_empty]]","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_cart_empty.tpl","content":"[[%ms2_cart_is_empty]]"}',
        'guid' => 'aa6fbd54a8467b140af63d97a72ef6fe',
        'native_key' => 0,
        'signature' => 'd221f995e5f74060234b8cf445648b3b',
      ),
      '805c2daaeae04037f4a00f361566dcea' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msMiniCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msMiniCart\\" [[+total_count:isnot=`0`:then=`class=\\"full\\"`:else=``]]>\\r\\n\\t<div class=\\"empty\\">\\r\\n\\t\\t<h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> [[%ms2_minicart]]<\\/h5>\\r\\n\\t\\t[[%ms2_minicart_is_empty]]\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"not_empty\\">\\r\\n\\t\\t<h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> [[%ms2_minicart]]<\\/h5>\\r\\n\\t\\t[[%ms2_minicart_goods]]: <strong class=\\"ms2_total_count\\">[[+total_count]]<\\/strong> [[%ms2_frontend_count_unit]],\\r\\n\\t\\t[[%ms2_minicart_cost]]: <strong class=\\"ms2_total_cost\\">[[+total_cost]]<\\/strong> [[%ms2_frontend_currency]]\\r\\n\\t<\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_minicart.tpl","content":"<div id=\\"msMiniCart\\" [[+total_count:isnot=`0`:then=`class=\\"full\\"`:else=``]]>\\r\\n\\t<div class=\\"empty\\">\\r\\n\\t\\t<h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> [[%ms2_minicart]]<\\/h5>\\r\\n\\t\\t[[%ms2_minicart_is_empty]]\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"not_empty\\">\\r\\n\\t\\t<h5><i class=\\"glyphicon glyphicon-shopping-cart\\"><\\/i> [[%ms2_minicart]]<\\/h5>\\r\\n\\t\\t[[%ms2_minicart_goods]]: <strong class=\\"ms2_total_count\\">[[+total_count]]<\\/strong> [[%ms2_frontend_count_unit]],\\r\\n\\t\\t[[%ms2_minicart_cost]]: <strong class=\\"ms2_total_cost\\">[[+total_cost]]<\\/strong> [[%ms2_frontend_currency]]\\r\\n\\t<\\/div>\\r\\n<\\/div>"}',
        'guid' => 'eaba365d2e466ae1e969f2c5c1205d81',
        'native_key' => 0,
        'signature' => '91a982224310ba235d2d893ccd19b7f5',
      ),
      '0c0e371599eb86122101a482b7713647' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProduct.content","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h1>[[*pagetitle]]<\\/h1>\\r\\n<div id=\\"msProduct\\" class=\\"row\\">\\r\\n\\t<div class=\\"span5 col-md-5\\">\\r\\n\\t\\t[[!msGallery]]\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"span7 col-md-7\\">\\r\\n\\t\\t<form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"[[*id]]\\" \\/>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_article]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">\\r\\n\\t\\t\\t\\t\\t\\t[[+article]]\\r\\n\\t\\t\\t\\t\\t<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_price]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">\\r\\n\\t\\t\\t\\t\\t\\t[[!+price]] [[%ms2_frontend_currency]]\\r\\n\\t\\t\\t\\t\\t\\t[[!+old_price:gt=`0`:then=`<span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>`:else=``]]\\r\\n\\t\\t\\t\\t\\t<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group form-inline\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\" for=\\"product_price\\">[[%ms2_cart_count]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"input-sm form-control\\" value=\\"1\\" \\/>\\r\\n\\t\\t\\t\\t\\t[[%ms2_frontend_count_unit]]\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_weight]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">[[+weight]] [[%ms2_frontend_weight_unit]]<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t[[!msOptions?name=`color`]]\\r\\n\\t\\t\\t[[!msOptions?name=`size`]]\\r\\n\\t\\t\\t[[-!msOptions?name=`tags`&tplRow=``&tplOuter=``]]\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_made_in]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">[[+made_in]]<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<button type=\\"submit\\" class=\\"btn btn-default\\" name=\\"ms2_action\\" value=\\"cart\\/add\\"><i class=\\"glyphicon glyphicon-barcode\\"><\\/i> [[%ms2_frontend_add_to_cart]]<\\/button>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/form>\\r\\n\\r\\n\\t<\\/div>\\r\\n<\\/div>\\r\\n[[*content]]","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_content.tpl","content":"<h1>[[*pagetitle]]<\\/h1>\\r\\n<div id=\\"msProduct\\" class=\\"row\\">\\r\\n\\t<div class=\\"span5 col-md-5\\">\\r\\n\\t\\t[[!msGallery]]\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"span7 col-md-7\\">\\r\\n\\t\\t<form class=\\"form-horizontal ms2_form\\" method=\\"post\\">\\r\\n\\t\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"[[*id]]\\" \\/>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_article]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">\\r\\n\\t\\t\\t\\t\\t\\t[[+article]]\\r\\n\\t\\t\\t\\t\\t<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_price]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">\\r\\n\\t\\t\\t\\t\\t\\t[[!+price]] [[%ms2_frontend_currency]]\\r\\n\\t\\t\\t\\t\\t\\t[[!+old_price:gt=`0`:then=`<span class=\\"old_price\\">[[+old_price]] [[%ms2_frontend_currency]]<\\/span>`:else=``]]\\r\\n\\t\\t\\t\\t\\t<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group form-inline\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\" for=\\"product_price\\">[[%ms2_cart_count]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"number\\" name=\\"count\\" id=\\"product_price\\" class=\\"input-sm form-control\\" value=\\"1\\" \\/>\\r\\n\\t\\t\\t\\t\\t[[%ms2_frontend_count_unit]]\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_weight]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">[[+weight]] [[%ms2_frontend_weight_unit]]<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t[[!msOptions?name=`color`]]\\r\\n\\t\\t\\t[[!msOptions?name=`size`]]\\r\\n\\t\\t\\t[[-!msOptions?name=`tags`&tplRow=``&tplOuter=``]]\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_made_in]]:<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"checkbox\\">[[+made_in]]<\\/label>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t\\t\\t\\t<button type=\\"submit\\" class=\\"btn btn-default\\" name=\\"ms2_action\\" value=\\"cart\\/add\\"><i class=\\"glyphicon glyphicon-barcode\\"><\\/i> [[%ms2_frontend_add_to_cart]]<\\/button>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/form>\\r\\n\\r\\n\\t<\\/div>\\r\\n<\\/div>\\r\\n[[*content]]"}',
        'guid' => '6ef92eb82bb396d3727ce94005bcb1ce',
        'native_key' => 0,
        'signature' => '468ba12729a1be527ab0390070676b1e',
      ),
      '8fb8f17245a855a30ec558db11a4301c' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGallery.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"span2 col-md-2\\">\\r\\n\\t<a href=\\"[[+360x270:default=`[[+url]]`]]\\" class=\\"thumbnail\\" data-image=\\"[[+url]]\\">\\r\\n\\t\\t<img src=\\"[[+120x90]]\\" alt=\\"\\" title=\\"[[+name]]\\" width=\\"120\\" height=\\"90\\">\\r\\n\\t<\\/a>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_gallery_row.tpl","content":"<div class=\\"span2 col-md-2\\">\\r\\n\\t<a href=\\"[[+360x270:default=`[[+url]]`]]\\" class=\\"thumbnail\\" data-image=\\"[[+url]]\\">\\r\\n\\t\\t<img src=\\"[[+120x90]]\\" alt=\\"\\" title=\\"[[+name]]\\" width=\\"120\\" height=\\"90\\">\\r\\n\\t<\\/a>\\r\\n<\\/div>"}',
        'guid' => 'ec902c632e14b42b87c4aa3d13811cac',
        'native_key' => 0,
        'signature' => 'efda60c176cec711870ebe8724011a8e',
      ),
      'a0fa09a1fd41c3c41dfa10e0e3fe7294' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGallery.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msGallery\\">\\r\\n\\t<a rel=\\"fancybox\\" href=\\"[[+url:default=`\\/assets\\/components\\/minishop2\\/img\\/web\\/ms2_big.png`]]\\" target=\\"_blank\\">\\r\\n\\t\\t<img src=\\"[[+360x270:default=`\\/assets\\/components\\/minishop2\\/img\\/web\\/ms2_medium.png`]]\\" width=\\"360\\" height=\\"270\\" alt=\\"\\" title=\\"\\" id=\\"mainImage\\" \\/>\\r\\n\\t<\\/a>\\r\\n\\t<div class=\\"row\\">\\r\\n\\t\\t[[+rows]]\\r\\n\\t<\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_gallery_outer.tpl","content":"<div id=\\"msGallery\\">\\r\\n\\t<a rel=\\"fancybox\\" href=\\"[[+url:default=`\\/assets\\/components\\/minishop2\\/img\\/web\\/ms2_big.png`]]\\" target=\\"_blank\\">\\r\\n\\t\\t<img src=\\"[[+360x270:default=`\\/assets\\/components\\/minishop2\\/img\\/web\\/ms2_medium.png`]]\\" width=\\"360\\" height=\\"270\\" alt=\\"\\" title=\\"\\" id=\\"mainImage\\" \\/>\\r\\n\\t<\\/a>\\r\\n\\t<div class=\\"row\\">\\r\\n\\t\\t[[+rows]]\\r\\n\\t<\\/div>\\r\\n<\\/div>"}',
        'guid' => '6a2ced836b485a7f7e065dff49c5fdb4',
        'native_key' => 0,
        'signature' => '537f56a3b1c484a105ea09a8f5e27e4d',
      ),
      '55782a51c23d881d830a51d84a62fe61' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGallery.empty","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"msGallery\\">\\r\\n\\t<img src=\\"[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_medium.png\\" width=\\"360\\" height=\\"270\\" alt=\\"no photo\\" title=\\"\\" \\/>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_gallery_empty.tpl","content":"<div id=\\"msGallery\\">\\r\\n\\t<img src=\\"[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_medium.png\\" width=\\"360\\" height=\\"270\\" alt=\\"no photo\\" title=\\"\\" \\/>\\r\\n<\\/div>"}',
        'guid' => 'e512dedac9b160c3cd2f9e28e8dad951',
        'native_key' => 0,
        'signature' => '4e173d0357c6058bba2308fe897b90c9',
      ),
      'c2ef6ac4f90c0d0fcff2c7f0930f980c' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOptions.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<option value=\\"[[+value]]\\" [[+selected]]>[[+value]]<\\/option>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_options_row.tpl","content":"<option value=\\"[[+value]]\\" [[+selected]]>[[+value]]<\\/option>"}',
        'guid' => '6e7784f66b49d6dafd8a26fffb342b5f',
        'native_key' => 0,
        'signature' => '6dfafee5228612df3969aaa3a0f27ad9',
      ),
      '97082d4a3526da34eff89960cf0cb557' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOptions.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"form-group\\">\\r\\n\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_[[+name]]]]:<\\/label>\\r\\n\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t<select name=\\"options[[[+name]]]\\" class=\\"form-control\\">[[+rows]]<\\/select>\\r\\n\\t<\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_options_outer.tpl","content":"<div class=\\"form-group\\">\\r\\n\\t<label class=\\"col-sm-2 control-label\\">[[%ms2_product_[[+name]]]]:<\\/label>\\r\\n\\t<div class=\\"col-sm-3\\">\\r\\n\\t\\t<select name=\\"options[[[+name]]]\\" class=\\"form-control\\">[[+rows]]<\\/select>\\r\\n\\t<\\/div>\\r\\n<\\/div>"}',
        'guid' => '54a25f73f61e1e9557859fbd7a4c07ac',
        'native_key' => 0,
        'signature' => 'f7b8f8eddedb0499af7653ebf1d31704',
      ),
      'c9c9b5b7191823812efb9cdbd865d90d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.new.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_new_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>\\r\\n\\r\\n[[+payment_link]]","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_new_user.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_new_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>\\r\\n\\r\\n[[+payment_link]]"}',
        'guid' => '347ef769704f0adee6f00f41f99cb6cf',
        'native_key' => 0,
        'signature' => 'db737f71b400c20985e36b3734a0a85a',
      ),
      'a940d5c49cffa898b08b4ba111d1b299' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.new.manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_new_manager]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_new_manager.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_new_manager]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>"}',
        'guid' => '8ad0a82430b80f8b7f95726fafe2eb73',
        'native_key' => 0,
        'signature' => '3e58d9cb7c5d5fcefaf2320b0541304d',
      ),
      'fa509eb956128d3bd28814461df47937' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.paid.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_paid_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_paid_user.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_paid_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>"}',
        'guid' => '8e5879da291a3f9aab6d5cf8c0fda6b5',
        'native_key' => 0,
        'signature' => 'fdf93048b94fe0ce85e6b2995da67dd7',
      ),
      '7341bca059b6ab8467f8a424aed0deff' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.paid.manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_paid_manager]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_paid_manager.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_paid_manager]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>"}',
        'guid' => 'e986611334aae04ffc2190310082de95',
        'native_key' => 0,
        'signature' => 'b0b516666079707af6bf22ccbf5c16fe',
      ),
      '66f5dc6ba0d6850273e3f2d9d8017a3a' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.sent.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_sent_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_sent_user.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_sent_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>"}',
        'guid' => 'e26a9d4ad0340ead3616392125d64f1e',
        'native_key' => 0,
        'signature' => '1e650434c481882efe29832de70fe3f0',
      ),
      '65cc508738e9af05762c30764502d769' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msEmail.cancelled.user","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_cancelled_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_email_cancelled_user.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_email_subject_cancelled_user]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>"}',
        'guid' => '55c6214c0138e18bd2a9d942177163f0',
        'native_key' => 0,
        'signature' => '947fe2389e9ab756bb0f0a8876e8a0da',
      ),
      '9e45e0eb4404ffc298e1571c7f873d19' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOrder.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"form-horizontal ms2_form\\" id=\\"msOrder\\" method=\\"post\\">\\r\\n\\t<div class=\\"row\\">\\r\\n\\t\\t<div class=\\"span6 col-md-6\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_credentials]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" for=\\"email\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_email]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"email\\" id=\\"email\\" placeholder=\\"[[%ms2_frontend_email]]\\" name=\\"email\\" value=\\"[[+email]]\\" class=\\"form-control [[+errors.email]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"receiver\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_receiver]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"receiver\\" placeholder=\\"[[%ms2_frontend_receiver]]\\" name=\\"receiver\\" value=\\"[[+receiver]]\\" class=\\"form-control [[+errors.receiver]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"phone\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_phone]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"phone\\" placeholder=\\"[[%ms2_frontend_phone]]\\" name=\\"phone\\" value=\\"[[+phone]]\\" class=\\"form-control [[+errors.phone]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"comment\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_comment]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<textarea name=\\"comment\\" id=\\"comment\\" placeholder=\\"[[%ms2_frontend_comment]]\\" class=\\"form-control [[+errors.comment]]\\">[[+comment]]<\\/textarea>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t\\t<div class=\\"span6 col-md-6\\" id=\\"payments\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_payments]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" ><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_payment_select]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t[[+payments]]\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"row\\">\\r\\n\\t\\t<div class=\\"span6 col-md-6\\" id=\\"deliveries\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_deliveries]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" ><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_delivery_select]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t[[+deliveries]]\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t\\t<div class=\\"span6 col-md-6\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_address]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" for=\\"index\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_index]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-4\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"index\\" placeholder=\\"[[%ms2_frontend_index]]\\"  name=\\"index\\" value=\\"[[+index]]\\" class=\\"form-control [[+errors.index]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"region\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_region]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"region\\" placeholder=\\"[[%ms2_frontend_region]]\\" name=\\"region\\" value=\\"[[+region]]\\" class=\\"form-control [[+errors.region]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"city\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_city]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"city\\" placeholder=\\"[[%ms2_frontend_city]]\\" name=\\"city\\" value=\\"[[+city]]\\" class=\\"form-control [[+errors.city]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"street\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_street]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-md-6\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\"col-md-4\\">\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"street\\" placeholder=\\"[[%ms2_frontend_street]]\\" name=\\"street\\" value=\\"[[+street]]\\" class=\\"form-control [[+errors.street]]\\">\\r\\n\\t\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t\\t\\t<div class=\\"col-md-4\\">\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"building\\" placeholder=\\"[[%ms2_frontend_building]]\\" name=\\"building\\" value=\\"[[+building]]\\" class=\\"form-control [[+errors.building]]\\">\\r\\n\\t\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t\\t\\t<div class=\\"col-md-4\\">\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"room\\" placeholder=\\"[[%ms2_frontend_room]]\\" name=\\"room\\" value=\\"[[+room]]\\" class=\\"form-control [[+errors.room]]\\">\\r\\n\\t\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t<\\/div>\\r\\n\\t<button type=\\"button\\" name=\\"ms2_action\\" value=\\"order\\/clean\\" class=\\"btn btn-default ms2_link\\"><i class=\\"glyphicon glyphicon-remove\\"><\\/i> [[%ms2_frontend_order_cancel]]<\\/button>\\r\\n\\t<hr\\/>\\r\\n\\t<div class=\\"well\\">\\r\\n\\t\\t<div class=\\"col-md-offset-2\\">\\r\\n\\t\\t\\t<h3>[[%ms2_frontend_order_cost]]: <span id=\\"ms2_order_cost\\">[[+order_cost:default=`0`]]<\\/span> [[%ms2_frontend_currency]]<\\/h3>\\r\\n\\t\\t\\t<button type=\\"submit\\" name=\\"ms2_action\\" value=\\"order\\/submit\\" class=\\"btn btn-default btn-primary ms2_link\\">[[%ms2_frontend_order_submit]]<\\/button>\\r\\n\\t\\t<\\/div>\\r\\n\\t<\\/div>\\r\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_order_outer.tpl","content":"<form class=\\"form-horizontal ms2_form\\" id=\\"msOrder\\" method=\\"post\\">\\r\\n\\t<div class=\\"row\\">\\r\\n\\t\\t<div class=\\"span6 col-md-6\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_credentials]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" for=\\"email\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_email]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"email\\" id=\\"email\\" placeholder=\\"[[%ms2_frontend_email]]\\" name=\\"email\\" value=\\"[[+email]]\\" class=\\"form-control [[+errors.email]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"receiver\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_receiver]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"receiver\\" placeholder=\\"[[%ms2_frontend_receiver]]\\" name=\\"receiver\\" value=\\"[[+receiver]]\\" class=\\"form-control [[+errors.receiver]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"phone\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_phone]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"phone\\" placeholder=\\"[[%ms2_frontend_phone]]\\" name=\\"phone\\" value=\\"[[+phone]]\\" class=\\"form-control [[+errors.phone]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"comment\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_comment]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<textarea name=\\"comment\\" id=\\"comment\\" placeholder=\\"[[%ms2_frontend_comment]]\\" class=\\"form-control [[+errors.comment]]\\">[[+comment]]<\\/textarea>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t\\t<div class=\\"span6 col-md-6\\" id=\\"payments\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_payments]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" ><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_payment_select]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t[[+payments]]\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"row\\">\\r\\n\\t\\t<div class=\\"span6 col-md-6\\" id=\\"deliveries\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_deliveries]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" ><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_delivery_select]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t[[+deliveries]]\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t\\t<div class=\\"span6 col-md-6\\">\\r\\n\\t\\t\\t<h4>[[%ms2_frontend_address]]:<\\/h4>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\" for=\\"index\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_index]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-4\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"index\\" placeholder=\\"[[%ms2_frontend_index]]\\"  name=\\"index\\" value=\\"[[+index]]\\" class=\\"form-control [[+errors.index]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"region\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_region]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"region\\" placeholder=\\"[[%ms2_frontend_region]]\\" name=\\"region\\" value=\\"[[+region]]\\" class=\\"form-control [[+errors.region]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"city\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_city]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-sm-6\\">\\r\\n\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"city\\" placeholder=\\"[[%ms2_frontend_city]]\\" name=\\"city\\" value=\\"[[+city]]\\" class=\\"form-control [[+errors.city]]\\">\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<div class=\\"form-group input-parent\\">\\r\\n\\t\\t\\t\\t<label class=\\"col-sm-4 control-label\\"  for=\\"street\\"><span class=\\"required-star\\">*<\\/span> [[%ms2_frontend_street]]<\\/label>\\r\\n\\t\\t\\t\\t<div class=\\"col-md-6\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\"col-md-4\\">\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"street\\" placeholder=\\"[[%ms2_frontend_street]]\\" name=\\"street\\" value=\\"[[+street]]\\" class=\\"form-control [[+errors.street]]\\">\\r\\n\\t\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t\\t\\t<div class=\\"col-md-4\\">\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"building\\" placeholder=\\"[[%ms2_frontend_building]]\\" name=\\"building\\" value=\\"[[+building]]\\" class=\\"form-control [[+errors.building]]\\">\\r\\n\\t\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t\\t\\t<div class=\\"col-md-4\\">\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\"text\\" id=\\"room\\" placeholder=\\"[[%ms2_frontend_room]]\\" name=\\"room\\" value=\\"[[+room]]\\" class=\\"form-control [[+errors.room]]\\">\\r\\n\\t\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t\\t<\\/div>\\r\\n\\t\\t\\t<\\/div>\\r\\n\\t\\t<\\/div>\\r\\n\\t<\\/div>\\r\\n\\t<button type=\\"button\\" name=\\"ms2_action\\" value=\\"order\\/clean\\" class=\\"btn btn-default ms2_link\\"><i class=\\"glyphicon glyphicon-remove\\"><\\/i> [[%ms2_frontend_order_cancel]]<\\/button>\\r\\n\\t<hr\\/>\\r\\n\\t<div class=\\"well\\">\\r\\n\\t\\t<div class=\\"col-md-offset-2\\">\\r\\n\\t\\t\\t<h3>[[%ms2_frontend_order_cost]]: <span id=\\"ms2_order_cost\\">[[+order_cost:default=`0`]]<\\/span> [[%ms2_frontend_currency]]<\\/h3>\\r\\n\\t\\t\\t<button type=\\"submit\\" name=\\"ms2_action\\" value=\\"order\\/submit\\" class=\\"btn btn-default btn-primary ms2_link\\">[[%ms2_frontend_order_submit]]<\\/button>\\r\\n\\t\\t<\\/div>\\r\\n\\t<\\/div>\\r\\n<\\/form>"}',
        'guid' => '011c66aed07b3a484e88c634613bdc9e',
        'native_key' => 0,
        'signature' => '39a9389f7319891b4c452af3d37e6d4c',
      ),
      '74fec42ba22c06bfbaf3965369fe5cc7' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOrder.payment","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"checkbox\\">\\r\\n\\t<label class=\\"payment input-parent\\">\\r\\n\\t\\t<input type=\\"radio\\" name=\\"payment\\" value=\\"[[+id]]\\" id=\\"payment_[[+id]]\\" [[+checked]]>\\r\\n\\t\\t[[+logo]]\\r\\n\\t\\t[[+description]]\\r\\n\\t<\\/label>\\r\\n<\\/div>\\r\\n<!--minishop2_logo <img src=\\"[[+logo]]\\" \\/>-->\\r\\n<!--minishop2_!logo [[+name]]-->\\r\\n<!--minishop2_description <p><small>[[+description]]<\\/small><\\/p>-->\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_order_payment.tpl","content":"<div class=\\"checkbox\\">\\r\\n\\t<label class=\\"payment input-parent\\">\\r\\n\\t\\t<input type=\\"radio\\" name=\\"payment\\" value=\\"[[+id]]\\" id=\\"payment_[[+id]]\\" [[+checked]]>\\r\\n\\t\\t[[+logo]]\\r\\n\\t\\t[[+description]]\\r\\n\\t<\\/label>\\r\\n<\\/div>\\r\\n<!--minishop2_logo <img src=\\"[[+logo]]\\" \\/>-->\\r\\n<!--minishop2_!logo [[+name]]-->\\r\\n<!--minishop2_description <p><small>[[+description]]<\\/small><\\/p>-->\\r\\n"}',
        'guid' => '22da198c62341ae4ee3d70b17c569e06',
        'native_key' => 0,
        'signature' => '2a866a402efe6bd5fc5484a45753d08e',
      ),
      'a090ba37b3fb8e19ee0ecf79c182fd3b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOrder.delivery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"checkbox\\">\\r\\n\\t<label class=\\"delivery input-parent\\">\\r\\n\\t\\t<input type=\\"radio\\" name=\\"delivery\\" value=\\"[[+id]]\\" id=\\"delivery_[[+id]]\\" data-payments=\'[[+payments]]\' [[+checked]]>\\r\\n\\t\\t[[+logo:default=`[[+name]]`]] <!--&mdash; <i>[[+price]] [[%ms2_frontend_currency]]<\\/i>-->\\r\\n\\t\\t[[+description]]\\r\\n\\t<\\/label>\\r\\n<\\/div>\\r\\n<!--minishop2_logo <img src=\\"[[+logo]]\\" \\/>-->\\r\\n<!--minishop2_description <p><small>[[+description]]<\\/small><\\/p>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_order_delivery.tpl","content":"<div class=\\"checkbox\\">\\r\\n\\t<label class=\\"delivery input-parent\\">\\r\\n\\t\\t<input type=\\"radio\\" name=\\"delivery\\" value=\\"[[+id]]\\" id=\\"delivery_[[+id]]\\" data-payments=\'[[+payments]]\' [[+checked]]>\\r\\n\\t\\t[[+logo:default=`[[+name]]`]] <!--&mdash; <i>[[+price]] [[%ms2_frontend_currency]]<\\/i>-->\\r\\n\\t\\t[[+description]]\\r\\n\\t<\\/label>\\r\\n<\\/div>\\r\\n<!--minishop2_logo <img src=\\"[[+logo]]\\" \\/>-->\\r\\n<!--minishop2_description <p><small>[[+description]]<\\/small><\\/p>-->"}',
        'guid' => 'cd9105d9e8c130cad099f6b5c544a2b5',
        'native_key' => 0,
        'signature' => 'c4365f74d8feca3b188bcc80c70b203d',
      ),
      '9112b8d76a62841700be1df83c0749a7' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msOrder.success","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_frontend_order_success]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_order_success.tpl","content":"[[!msGetOrder?id=`[[+id]]`]]\\r\\n\\r\\n<h3>[[%ms2_frontend_order_success]]<\\/h3>\\r\\n\\r\\n<div id=\\"msCart\\">\\r\\n\\t<table class=\\"table table-striped\\">\\r\\n\\t\\t<tr class=\\"header\\">\\r\\n\\t\\t\\t<th class=\\"image span2 col-md-2\\">&nbsp;<\\/th>\\r\\n\\t\\t\\t<th class=\\"title span4 col-md-4\\">[[%ms2_cart_title]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"count span2 col-md-2\\">[[%ms2_cart_count]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"weight span1 col-md-1\\">[[%ms2_cart_weight]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"price span1 col-md-1\\">[[%ms2_cart_cost]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t\\t[[+goods]]\\r\\n\\t\\t<tr class=\\"footer\\">\\r\\n\\t\\t\\t<th class=\\"total\\" colspan=\\"2\\">[[%ms2_cart_total]]:<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_count\\"><span class=\\"ms2_total_count\\">[[+cart_count]]<\\/span> [[%ms2_frontend_count_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_weight\\"><span class=\\"ms2_total_weight\\">[[+cart_weight]]<\\/span> [[%ms2_frontend_weight_unit]]<\\/th>\\r\\n\\t\\t\\t<th class=\\"total_cost\\"><span class=\\"ms2_total_cost\\">[[+cart_cost]]<\\/span> [[%ms2_frontend_currency]]<\\/th>\\r\\n\\t\\t<\\/tr>\\r\\n\\t<\\/table>\\r\\n\\t<h4>[[%ms2_frontend_order_cost]]: [[+cart_cost]] [[%ms2_frontend_currency]] + [[+delivery_cost]] [[%ms2_frontend_currency]] = <big>[[+cost]]<\\/big> [[%ms2_frontend_currency]]<\\/h4>\\r\\n<\\/div>"}',
        'guid' => '27573138ad73c5b06d5f3037539b31a2',
        'native_key' => 0,
        'signature' => 'c2ce84de77bdbb63e19601a3d1128e7f',
      ),
      '0fd3af060587767665843e1cb6cd0fe9' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msGetOrder.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<tr>\\r\\n\\t<td class=\\"image\\"><img src=\\"[[++site_url]][[+thumb:default=`[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_small.png`]]\\" \\/><\\/td>\\r\\n\\t<td class=\\"title\\">[[+link:isnot=``:then=`<a href=\\"[[+link]]\\">[[+name]]<\\/a>`:else=`[[+name]]`]]<br\\/>\\r\\n\\t\\t<small><i>[[+option.color]] [[+option.size]]<\\/i><\\/small>\\r\\n\\t<\\/td>\\r\\n\\t<td class=\\"count\\">[[+count]] [[%ms2_frontend_count_unit]]<\\/td>\\r\\n\\t<td class=\\"weight\\">[[+weight]] [[%ms2_frontend_weight_unit]]<\\/td>\\r\\n\\t<td class=\\"price\\">[[+price]] [[%ms2_frontend_currency]]<\\/td>\\r\\n<\\/tr>\\r\\n<!--minishop2_option.color [[%ms2_frontend_color]]: [[+option.color]];-->\\r\\n<!--minishop2_option.size [[%ms2_frontend_size]]: [[+option.size]];-->\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_get_order_row.tpl","content":"<tr>\\r\\n\\t<td class=\\"image\\"><img src=\\"[[++site_url]][[+thumb:default=`[[++assets_url]]components\\/minishop2\\/img\\/web\\/ms2_small.png`]]\\" \\/><\\/td>\\r\\n\\t<td class=\\"title\\">[[+link:isnot=``:then=`<a href=\\"[[+link]]\\">[[+name]]<\\/a>`:else=`[[+name]]`]]<br\\/>\\r\\n\\t\\t<small><i>[[+option.color]] [[+option.size]]<\\/i><\\/small>\\r\\n\\t<\\/td>\\r\\n\\t<td class=\\"count\\">[[+count]] [[%ms2_frontend_count_unit]]<\\/td>\\r\\n\\t<td class=\\"weight\\">[[+weight]] [[%ms2_frontend_weight_unit]]<\\/td>\\r\\n\\t<td class=\\"price\\">[[+price]] [[%ms2_frontend_currency]]<\\/td>\\r\\n<\\/tr>\\r\\n<!--minishop2_option.color [[%ms2_frontend_color]]: [[+option.color]];-->\\r\\n<!--minishop2_option.size [[%ms2_frontend_size]]: [[+option.size]];-->\\r\\n"}',
        'guid' => '8ae5ce2da5bb4ad2e6ebeb4e22a0a09b',
        'native_key' => 0,
        'signature' => 'fc59a854d54c1668738eba543f33df9c',
      ),
      '99c7439072e1ac0da69642a30a7ad119' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProductOptions.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<table>\\r\\n    [[+rows]]\\r\\n<\\/table>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_options_outer.tpl","content":"<table>\\r\\n    [[+rows]]\\r\\n<\\/table>"}',
        'guid' => '206ba86a60b5e453a5301bca0bcc32b6',
        'native_key' => 0,
        'signature' => '7d55eb3d113375ec5053b00610ad838d',
      ),
      '369a83ea6e64c4cf5016200983744cac' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.msProductOptions.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<tr>\\r\\n    <td>\\r\\n        <b>[[+caption]]:<\\/b>\\r\\n    <\\/td>\\r\\n    <td>\\r\\n        [[+value]]\\r\\n    <\\/td>\\r\\n<\\/tr>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/chunks\\/chunk.ms_product_options_row.tpl","content":"<tr>\\r\\n    <td>\\r\\n        <b>[[+caption]]:<\\/b>\\r\\n    <\\/td>\\r\\n    <td>\\r\\n        [[+value]]\\r\\n    <\\/td>\\r\\n<\\/tr>"}',
        'guid' => 'fc618be47d735d9fd8c6b07047433426',
        'native_key' => 0,
        'signature' => 'cf4daa41f8cdd8faba8f182d739d5cb6',
      ),
    ),
    'Snippets' => 
    array (
      'd155fed25ca0e3fa365b35882da38eca' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProducts","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\r\\n\\/\\/ You can set modResource instead of msProduct\\r\\nif (empty($class)) {$scriptProperties[\'class\'] = \'msProduct\';}\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n\\/\\/ Start building \\"Where\\" expression\\r\\n$where = array(\'class_key\' => \'msProduct\');\\r\\nif (empty($showZeroPrice)) {$where[\'Data.price:>\'] = 0;}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$leftJoin = array(\\r\\n    array(\'class\' => \'msProductData\', \'alias\' => \'Data\', \'on\' => \'`\'.$class.\'`.`id`=`Data`.`id`\'),\\r\\n    array(\'class\' => \'msVendor\', \'alias\' => \'Vendor\', \'on\' => \'`Data`.`vendor`=`Vendor`.`id`\'),\\r\\n);\\r\\n$innerJoin = array();\\r\\n\\r\\n\\/\\/ Include Thumbnails\\r\\n$thumbsSelect = array();\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));\\r\\n    if(!empty($thumbs[0])){\\r\\n        foreach ($thumbs as $thumb) {\\r\\n            $leftJoin[] = array(\\r\\n                \'class\' => \'msProductFile\',\\r\\n                \'alias\' => $thumb,\\r\\n                \'on\' => \\"`$thumb`.`product_id` = `$class`.`id` AND `$thumb`.`parent` != 0 AND `$thumb`.`path` LIKE \'%\\/$thumb\\/\'\\"\\r\\n            );\\r\\n            $thumbsSelect[$thumb] = \\"`$thumb`.`url` as `$thumb`\\";\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ include Linked products\\r\\nif (!empty($link) && !empty($master)) {\\r\\n    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`slave` AND `Link`.`link` = \'.$link);\\r\\n    $where[\'Link.master\'] = $master;\\r\\n}\\r\\nelse if (!empty($link) && !empty($slave)) {\\r\\n    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`master` AND `Link`.`link` = \'.$link);\\r\\n    $where[\'Link.slave\'] = $slave;\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    $class => !empty($includeContent) ?  $modx->getSelectColumns($class, $class) : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\r\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\r\\n);\\r\\nif (!empty($thumbsSelect)) {$select = array_merge($select, $thumbsSelect);}\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\',\'leftJoin\',\'innerJoin\',\'select\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $modx->fromJSON($scriptProperties[$v]);\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n\\r\\n$joinedOptions = array();\\r\\n\\/\\/ Add filters by options\\r\\nif (!empty($scriptProperties[\'optionFilters\'])) {\\r\\n    $filters = $modx->fromJSON($scriptProperties[\'optionFilters\']);\\r\\n    $opt_where = array();\\r\\n\\r\\n    foreach ($filters as $key => $value) {\\r\\n        $key_operator= explode(\':\', $key);\\r\\n        $operator = \'=\';\\r\\n        $conj = \'\';\\r\\n        if ($key_operator && count($key_operator) === 2) {\\r\\n            $key= $key_operator[0];\\r\\n            $operator= $key_operator[1];\\r\\n        }\\r\\n        elseif ($key_operator && count($key_operator) === 3) {\\r\\n            $conj= $key_operator[0];\\r\\n            $key= $key_operator[1];\\r\\n            $operator= $key_operator[2];\\r\\n        }\\r\\n\\r\\n        if (!in_array($key, $joinedOptions)) {\\r\\n            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $key, \'on\' => \\"`{$key}`.`product_id`=`Data`.`id` AND `{$key}`.`key`=\'{$key}\'\\");\\r\\n            $joinedOptions[] = $key;\\r\\n        }\\r\\n\\r\\n        if (!is_string($value)) {\\r\\n            if (!empty($conj)) {\\r\\n                $last_where = end($opt_where);\\r\\n                if (is_array($last_where)) {\\r\\n                    $conj = !empty($conj) ? $conj.\':\' : \'\';\\r\\n                    $opt_where[] = array(\\"{$conj}`{$key}`.`value`:{$operator}\\" => $value);\\r\\n                } else {\\r\\n                    array_splice($opt_where, -1, 1, $last_where . \\" {$conj} `{$key}`.`value`{$operator}{$value}\\");\\r\\n                }\\r\\n            } else {\\r\\n                $opt_where[] = \\"`{$key}`.`value`{$operator}{$value}\\";\\r\\n            }\\r\\n\\r\\n        } else {\\r\\n            $conj = !empty($conj) ? $conj.\':\' : \'\';\\r\\n            $opt_where[] = array(\\"{$conj}`{$key}`.`value`:{$operator}\\" => $value);\\r\\n        }\\r\\n\\r\\n\\r\\n    }\\r\\n    $where[] = $opt_where;\\r\\n}\\r\\n\\r\\n\\/\\/ Add sorting by options\\r\\nif (!empty($scriptProperties[\'sortbyOptions\'])) {\\r\\n    $sorts = explode(\',\', $scriptProperties[\'sortbyOptions\']);\\r\\n    foreach ($sorts as $sort) {\\r\\n        $sort = explode(\':\', $sort);\\r\\n        $option = $sort[0];\\r\\n        $type = \'string\';\\r\\n        if (isset($sort[1])) {\\r\\n            $type = $sort[1];\\r\\n        }\\r\\n\\r\\n        switch ($type) {\\r\\n            case \'number\':\\r\\n            case \'decimal\':\\r\\n                $sortbyOptions = \\"CAST(`{$option}`.`value` AS DECIMAL(13,3))\\";\\r\\n                break;\\r\\n            case \'integer\':\\r\\n                $sortbyOptions = \\"CAST(`{$option}`.`value` AS UNSIGNED INTEGER)\\";\\r\\n                break;\\r\\n            case \'date\':\\r\\n            case \'datetime\':\\r\\n                $sortbyOptions = \\"CAST(`{$option}`.`value` AS DATETIME)\\";\\r\\n                break;\\r\\n            default:\\r\\n                $sortbyOptions =\\"`{$option}`.`value`\\";\\r\\n                break;\\r\\n        }\\r\\n\\r\\n        $scriptProperties[\'sortby\'] = str_replace($option, $sortbyOptions, $scriptProperties[\'sortby\']);\\r\\n\\r\\n        if (!in_array($option, $joinedOptions)) {\\r\\n            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $option, \'on\' => \\"`{$option}`.`product_id`=`Data`.`id` AND `{$option}`.`key`=\'{$option}\'\\");\\r\\n            $joinedOptions[] = $option;\\r\\n        }\\r\\n\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $modx->toJSON($where),\\r\\n    \'leftJoin\' => $modx->toJSON($leftJoin),\\r\\n    \'innerJoin\' => $modx->toJSON($innerJoin),\\r\\n    \'select\' => $modx->toJSON($select),\\r\\n    \'sortby\' => $class.\'id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => $class.\'.id\',\\r\\n    \'fastMode\' => false,\\r\\n    \'return\' => !empty($returnIds) ? \'ids\' : \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\nif (!empty($returnIds)) {return $rows;}\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    $q = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\',\'msOnGetProductWeight\')));\\r\\n    $q->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');\\r\\n    $q->where(\'modPlugin.disabled = 0\');\\r\\n\\r\\n    if ($modificators = $modx->getOption(\'ms2_price_snippet\', null, false, true) || $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $q)) {\\r\\n        \\/* @var msProductData $product *\\/\\r\\n        $product = $modx->newObject(\'msProductData\');\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Checked the active modifiers\');\\r\\n\\r\\n    $opt_time = 0;\\r\\n    foreach ($rows as $k => $row) {\\r\\n        if ($modificators) {\\r\\n            $product->fromArray($row, \'\', true, true);\\r\\n            $tmp = $row[\'price\'];\\r\\n            $row[\'price\'] = $product->getPrice($row);\\r\\n            $row[\'weight\'] = $product->getWeight($row);\\r\\n            if ($row[\'price\'] != $tmp) {\\r\\n                $row[\'old_price\'] = $tmp;\\r\\n            }\\r\\n        }\\r\\n        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\r\\n        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);\\r\\n        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\r\\n        $opt_time_start = microtime(true);\\r\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\r\\n        $row = array_merge($row, $options);\\r\\n        $opt_time += microtime(true) - $opt_time_start;\\r\\n\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] .= empty($tpl)\\r\\n            ? $pdoFetch->getChunk(\'\', $row)\\r\\n            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Loaded options for products\', $opt_time);\\r\\n    $pdoFetch->addTime(\'Returning processed chunks\');\\r\\n}\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"msProductsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n    $modx->setPlaceholder($log, $toSeparatePlaceholders.\'log\');\\r\\n}\\r\\nelse {\\r\\n    if (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\n    $output = is_array($output) ? implode($outputSeparator, $output) : $output;\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    }\\r\\n    else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:30:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.msProducts.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:14:\\"ms2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:15:\\"ms2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:14:\\"ms2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:15:\\"ms2_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"id\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"sortbyOptions\\";a:7:{s:4:\\"name\\";s:13:\\"sortbyOptions\\";s:4:\\"desc\\";s:22:\\"ms2_prop_sortbyOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:16:\\"ms2_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:31:\\"ms2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:16:\\"ms2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:18:\\"ms2_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:17:\\"ms2_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:23:\\"ms2_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"optionFilters\\";a:7:{s:4:\\"name\\";s:13:\\"optionFilters\\";s:4:\\"desc\\";s:22:\\"ms2_prop_optionFilters\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:14:\\"ms2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"link\\";a:7:{s:4:\\"name\\";s:4:\\"link\\";s:4:\\"desc\\";s:13:\\"ms2_prop_link\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"master\\";a:7:{s:4:\\"name\\";s:6:\\"master\\";s:4:\\"desc\\";s:15:\\"ms2_prop_master\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"slave\\";a:7:{s:4:\\"name\\";s:5:\\"slave\\";s:4:\\"desc\\";s:14:\\"ms2_prop_slave\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"class\\";a:7:{s:4:\\"name\\";s:5:\\"class\\";s:4:\\"desc\\";s:14:\\"ms2_prop_class\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"msProduct\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:24:\\"ms2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:18:\\"ms2_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:24:\\"ms2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:20:\\"ms2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:19:\\"ms2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"showZeroPrice\\";a:7:{s:4:\\"name\\";s:13:\\"showZeroPrice\\";s:4:\\"desc\\";s:22:\\"ms2_prop_showZeroPrice\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:20:\\"ms2_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_products.php","content":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\r\\n\\/\\/ You can set modResource instead of msProduct\\r\\nif (empty($class)) {$scriptProperties[\'class\'] = \'msProduct\';}\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n\\/\\/ Start building \\"Where\\" expression\\r\\n$where = array(\'class_key\' => \'msProduct\');\\r\\nif (empty($showZeroPrice)) {$where[\'Data.price:>\'] = 0;}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$leftJoin = array(\\r\\n    array(\'class\' => \'msProductData\', \'alias\' => \'Data\', \'on\' => \'`\'.$class.\'`.`id`=`Data`.`id`\'),\\r\\n    array(\'class\' => \'msVendor\', \'alias\' => \'Vendor\', \'on\' => \'`Data`.`vendor`=`Vendor`.`id`\'),\\r\\n);\\r\\n$innerJoin = array();\\r\\n\\r\\n\\/\\/ Include Thumbnails\\r\\n$thumbsSelect = array();\\r\\nif (!empty($includeThumbs)) {\\r\\n    $thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));\\r\\n    if(!empty($thumbs[0])){\\r\\n        foreach ($thumbs as $thumb) {\\r\\n            $leftJoin[] = array(\\r\\n                \'class\' => \'msProductFile\',\\r\\n                \'alias\' => $thumb,\\r\\n                \'on\' => \\"`$thumb`.`product_id` = `$class`.`id` AND `$thumb`.`parent` != 0 AND `$thumb`.`path` LIKE \'%\\/$thumb\\/\'\\"\\r\\n            );\\r\\n            $thumbsSelect[$thumb] = \\"`$thumb`.`url` as `$thumb`\\";\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ include Linked products\\r\\nif (!empty($link) && !empty($master)) {\\r\\n    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`slave` AND `Link`.`link` = \'.$link);\\r\\n    $where[\'Link.master\'] = $master;\\r\\n}\\r\\nelse if (!empty($link) && !empty($slave)) {\\r\\n    $innerJoin[] = array(\'class\' => \'msProductLink\', \'alias\' => \'Link\', \'on\' => \'`\'.$class.\'`.`id` = `Link`.`master` AND `Link`.`link` = \'.$link);\\r\\n    $where[\'Link.slave\'] = $slave;\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    $class => !empty($includeContent) ?  $modx->getSelectColumns($class, $class) : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\r\\n    \'Data\' => $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true),\\r\\n    \'Vendor\' => $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true),\\r\\n);\\r\\nif (!empty($thumbsSelect)) {$select = array_merge($select, $thumbsSelect);}\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\',\'leftJoin\',\'innerJoin\',\'select\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $modx->fromJSON($scriptProperties[$v]);\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n\\r\\n$joinedOptions = array();\\r\\n\\/\\/ Add filters by options\\r\\nif (!empty($scriptProperties[\'optionFilters\'])) {\\r\\n    $filters = $modx->fromJSON($scriptProperties[\'optionFilters\']);\\r\\n    $opt_where = array();\\r\\n\\r\\n    foreach ($filters as $key => $value) {\\r\\n        $key_operator= explode(\':\', $key);\\r\\n        $operator = \'=\';\\r\\n        $conj = \'\';\\r\\n        if ($key_operator && count($key_operator) === 2) {\\r\\n            $key= $key_operator[0];\\r\\n            $operator= $key_operator[1];\\r\\n        }\\r\\n        elseif ($key_operator && count($key_operator) === 3) {\\r\\n            $conj= $key_operator[0];\\r\\n            $key= $key_operator[1];\\r\\n            $operator= $key_operator[2];\\r\\n        }\\r\\n\\r\\n        if (!in_array($key, $joinedOptions)) {\\r\\n            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $key, \'on\' => \\"`{$key}`.`product_id`=`Data`.`id` AND `{$key}`.`key`=\'{$key}\'\\");\\r\\n            $joinedOptions[] = $key;\\r\\n        }\\r\\n\\r\\n        if (!is_string($value)) {\\r\\n            if (!empty($conj)) {\\r\\n                $last_where = end($opt_where);\\r\\n                if (is_array($last_where)) {\\r\\n                    $conj = !empty($conj) ? $conj.\':\' : \'\';\\r\\n                    $opt_where[] = array(\\"{$conj}`{$key}`.`value`:{$operator}\\" => $value);\\r\\n                } else {\\r\\n                    array_splice($opt_where, -1, 1, $last_where . \\" {$conj} `{$key}`.`value`{$operator}{$value}\\");\\r\\n                }\\r\\n            } else {\\r\\n                $opt_where[] = \\"`{$key}`.`value`{$operator}{$value}\\";\\r\\n            }\\r\\n\\r\\n        } else {\\r\\n            $conj = !empty($conj) ? $conj.\':\' : \'\';\\r\\n            $opt_where[] = array(\\"{$conj}`{$key}`.`value`:{$operator}\\" => $value);\\r\\n        }\\r\\n\\r\\n\\r\\n    }\\r\\n    $where[] = $opt_where;\\r\\n}\\r\\n\\r\\n\\/\\/ Add sorting by options\\r\\nif (!empty($scriptProperties[\'sortbyOptions\'])) {\\r\\n    $sorts = explode(\',\', $scriptProperties[\'sortbyOptions\']);\\r\\n    foreach ($sorts as $sort) {\\r\\n        $sort = explode(\':\', $sort);\\r\\n        $option = $sort[0];\\r\\n        $type = \'string\';\\r\\n        if (isset($sort[1])) {\\r\\n            $type = $sort[1];\\r\\n        }\\r\\n\\r\\n        switch ($type) {\\r\\n            case \'number\':\\r\\n            case \'decimal\':\\r\\n                $sortbyOptions = \\"CAST(`{$option}`.`value` AS DECIMAL(13,3))\\";\\r\\n                break;\\r\\n            case \'integer\':\\r\\n                $sortbyOptions = \\"CAST(`{$option}`.`value` AS UNSIGNED INTEGER)\\";\\r\\n                break;\\r\\n            case \'date\':\\r\\n            case \'datetime\':\\r\\n                $sortbyOptions = \\"CAST(`{$option}`.`value` AS DATETIME)\\";\\r\\n                break;\\r\\n            default:\\r\\n                $sortbyOptions =\\"`{$option}`.`value`\\";\\r\\n                break;\\r\\n        }\\r\\n\\r\\n        $scriptProperties[\'sortby\'] = str_replace($option, $sortbyOptions, $scriptProperties[\'sortby\']);\\r\\n\\r\\n        if (!in_array($option, $joinedOptions)) {\\r\\n            $leftJoin[] = array(\'class\' => \'msProductOption\', \'alias\' => $option, \'on\' => \\"`{$option}`.`product_id`=`Data`.`id` AND `{$option}`.`key`=\'{$option}\'\\");\\r\\n            $joinedOptions[] = $option;\\r\\n        }\\r\\n\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => $modx->toJSON($where),\\r\\n    \'leftJoin\' => $modx->toJSON($leftJoin),\\r\\n    \'innerJoin\' => $modx->toJSON($innerJoin),\\r\\n    \'select\' => $modx->toJSON($select),\\r\\n    \'sortby\' => $class.\'id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => $class.\'.id\',\\r\\n    \'fastMode\' => false,\\r\\n    \'return\' => !empty($returnIds) ? \'ids\' : \'data\',\\r\\n    \'nestedChunkPrefix\' => \'minishop2_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\nif (!empty($returnIds)) {return $rows;}\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    $q = $modx->newQuery(\'modPluginEvent\', array(\'event:IN\' => array(\'msOnGetProductPrice\',\'msOnGetProductWeight\')));\\r\\n    $q->innerJoin(\'modPlugin\', \'modPlugin\', \'modPlugin.id = modPluginEvent.pluginid\');\\r\\n    $q->where(\'modPlugin.disabled = 0\');\\r\\n\\r\\n    if ($modificators = $modx->getOption(\'ms2_price_snippet\', null, false, true) || $modx->getOption(\'ms2_weight_snippet\', null, false, true) || $modx->getCount(\'modPluginEvent\', $q)) {\\r\\n        \\/* @var msProductData $product *\\/\\r\\n        $product = $modx->newObject(\'msProductData\');\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Checked the active modifiers\');\\r\\n\\r\\n    $opt_time = 0;\\r\\n    foreach ($rows as $k => $row) {\\r\\n        if ($modificators) {\\r\\n            $product->fromArray($row, \'\', true, true);\\r\\n            $tmp = $row[\'price\'];\\r\\n            $row[\'price\'] = $product->getPrice($row);\\r\\n            $row[\'weight\'] = $product->getWeight($row);\\r\\n            if ($row[\'price\'] != $tmp) {\\r\\n                $row[\'old_price\'] = $tmp;\\r\\n            }\\r\\n        }\\r\\n        $row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\r\\n        $row[\'old_price\'] = $miniShop2->formatPrice($row[\'old_price\']);\\r\\n        $row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\r\\n        $opt_time_start = microtime(true);\\r\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\r\\n        $row = array_merge($row, $options);\\r\\n        $opt_time += microtime(true) - $opt_time_start;\\r\\n\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] .= empty($tpl)\\r\\n            ? $pdoFetch->getChunk(\'\', $row)\\r\\n            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Loaded options for products\', $opt_time);\\r\\n    $pdoFetch->addTime(\'Returning processed chunks\');\\r\\n}\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"msProductsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n    $modx->setPlaceholder($log, $toSeparatePlaceholders.\'log\');\\r\\n}\\r\\nelse {\\r\\n    if (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\n    $output = is_array($output) ? implode($outputSeparator, $output) : $output;\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    }\\r\\n    else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => 'c306e90f692803e8be74dbe1a2d5cf8d',
        'native_key' => 0,
        'signature' => '270cf8f3d80428f1dcf346d232ca420b',
      ),
      '686da7d13e62e8a2ec37a1fb203db4d6' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n$cart = $miniShop2->cart->get();\\r\\n$status = $miniShop2->cart->status();\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n\\treturn \'\';\\r\\n}\\r\\nelseif (empty($status[\'total_count\'])) {\\r\\n\\treturn !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Include Thumbnails\\r\\n$thumbsLeftJoin = \'\';\\r\\n$thumbsSelect = array();\\r\\nif (!empty($includeThumbs)) {\\r\\n\\t$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));\\r\\n\\tif(!empty($thumbs[0])){\\r\\n\\t\\tforeach ($thumbs as $thumb) {\\r\\n\\t\\t\\t$thumbsLeftJoin .= \',{\\"class\\":\\"msProductFile\\",\\"alias\\":\\"\'.$thumb.\'\\",\\"on\\":\\"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\\\'%\\/\'.$thumb.\'\\/\\\\\'\\"}\';\\r\\n\\t\\t\\t$thumbsSelect[] = \' \\"\'.$thumb.\'\\":\\"\'.$thumb.\'.url as \'.$thumb.\'\\" \';\\r\\n\\t\\t}\\r\\n\\t\\t$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'<\\/b>.\');\\r\\n\\t}\\r\\n}\\r\\n\\/\\/ End of including Thumbnails\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);\\r\\n$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true);\\r\\n$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);\\r\\n\\r\\n\\/\\/ Tables for joining\\r\\n$leftJoin = \'{\\"class\\":\\"msProductData\\",\\"alias\\":\\"Data\\",\\"on\\":\\"msProduct.id=Data.id\\"},{\\"class\\":\\"msVendor\\",\\"alias\\":\\"Vendor\\",\\"on\\":\\"Data.vendor=Vendor.id\\"}\';\\r\\nif (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}\\r\\n$select = \'\\"msProduct\\":\\"\'.$resourceColumns.\'\\",\\"Data\\":\\"\'.$dataColumns.\'\\",\\"Vendor\\":\\"\'.$vendorColumns.\'\\"\';\\r\\nif (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n\\r\\n$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n\\r\\n\\/\\/ Working\\r\\n$outer = array(\'goods\' => \'\', \'total_count\' => 0, \'total_weight\' => 0, \'total_cost\' => 0);\\r\\nforeach ($cart as $k => $v) {\\r\\n\\r\\n\\t$default = array(\\r\\n\\t\\t\'class\' => \'msProduct\'\\r\\n\\t\\t,\'where\' => \'{\\"msProduct.id\\":\\"\'.$v[\'id\'].\'\\",\\"class_key\\":\\"msProduct\\"}\'\\r\\n\\t\\t,\'leftJoin\' => \'[\'.$leftJoin.\']\'\\r\\n\\t\\t,\'select\' => \'{\'.$select.\'}\'\\r\\n\\t\\t,\'sortby\' => \'id\'\\r\\n\\t\\t,\'sortdir\' => \'ASC\'\\r\\n\\t\\t,\'groupby\' => \'msProduct.id\'\\r\\n\\t\\t,\'fastMode\' => false\\r\\n\\t\\t,\'limit\' => 0\\r\\n\\t\\t,\'return\' => \'data\'\\r\\n\\t\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n\\t);\\r\\n\\t\\/\\/ Merge all properties and run!\\r\\n\\t$pdoFetch->config = array_merge($pdoFetch->config, $default, $scriptProperties);\\r\\n\\t$rows = $pdoFetch->run();\\r\\n\\r\\n\\t\\/\\/ If not empty and relevant to the context, then show\\r\\n\\tif (!empty($rows[0]) && (empty($v[\'ctx\']) || $v[\'ctx\'] == $modx->context->key)) {\\r\\n\\t\\t$row = $rows[0];\\r\\n\\t\\t$row[\'key\'] = $k;\\r\\n\\t\\t$row[\'count\'] = $v[\'count\'];\\r\\n\\t\\t$row[\'old_price\'] = $miniShop2->formatPrice(\\r\\n\\t\\t\\t$row[\'price\'] != $v[\'price\']\\r\\n\\t\\t\\t\\t? $row[\'price\']\\r\\n\\t\\t\\t\\t: $row[\'old_price\']\\r\\n\\t\\t);\\r\\n\\t\\t$row[\'price\'] = $miniShop2->formatPrice($v[\'price\']);\\r\\n\\t\\t$row[\'weight\'] = $miniShop2->formatWeight($v[\'weight\']);\\r\\n\\t\\t$row[\'cost\'] = $miniShop2->formatPrice($v[\'count\'] * $v[\'price\']);\\r\\n\\r\\n\\t\\t\\/\\/ Additional properties of product\\r\\n\\t\\tif (!empty($v[\'options\']) && is_array($v[\'options\'])) {\\r\\n\\t\\t\\tforeach ($v[\'options\'] as $key => $value) {\\r\\n\\t\\t\\t\\t$row[\'option.\'.$key] = $value;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\tunset($v[\'options\']);\\r\\n\\r\\n        \\/\\/ Add option values\\r\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\r\\n        $row = array_merge($row, $options);\\r\\n\\r\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\t\\t$tplRow = $pdoFetch->defineChunk($row);\\r\\n\\t\\t$outer[\'goods\'] .= empty($tplRow)\\r\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', $row)\\r\\n\\t\\t\\t: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);\\r\\n\\r\\n\\t\\t$outer[\'total_count\'] += $v[\'count\'];\\r\\n\\t\\t$outer[\'total_cost\'] +=  $v[\'count\'] * $v[\'price\'];\\r\\n\\t\\t$outer[\'total_weight\'] += $v[\'count\'] * $v[\'weight\'];\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$outer[\'total_cost\'] = $miniShop2->formatPrice($outer[\'total_cost\']);\\r\\n$outer[\'total_weight\'] = $miniShop2->formatWeight($outer[\'total_weight\']);\\r\\n\\r\\nreturn empty($tplOuter)\\r\\n\\t? $pdoFetch->getChunk(\'\', $outer)\\r\\n\\t: $pdoFetch->getChunk($tplOuter, $outer, $pdoFetch->config[\'fastMode\']);","locked":0,"properties":"a:5:{s:6:\\"tplRow\\";a:7:{s:4:\\"name\\";s:6:\\"tplRow\\";s:4:\\"desc\\";s:15:\\"ms2_prop_tplRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.msCart.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:16:\\"tpl.msCart.outer\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:16:\\"tpl.msCart.empty\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_cart.php","content":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n$cart = $miniShop2->cart->get();\\r\\n$status = $miniShop2->cart->status();\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n\\treturn \'\';\\r\\n}\\r\\nelseif (empty($status[\'total_count\'])) {\\r\\n\\treturn !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';\\r\\n}\\r\\n\\r\\n\\/\\/ Include Thumbnails\\r\\n$thumbsLeftJoin = \'\';\\r\\n$thumbsSelect = array();\\r\\nif (!empty($includeThumbs)) {\\r\\n\\t$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));\\r\\n\\tif(!empty($thumbs[0])){\\r\\n\\t\\tforeach ($thumbs as $thumb) {\\r\\n\\t\\t\\t$thumbsLeftJoin .= \',{\\"class\\":\\"msProductFile\\",\\"alias\\":\\"\'.$thumb.\'\\",\\"on\\":\\"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\\\'%\\/\'.$thumb.\'\\/\\\\\'\\"}\';\\r\\n\\t\\t\\t$thumbsSelect[] = \' \\"\'.$thumb.\'\\":\\"\'.$thumb.\'.url as \'.$thumb.\'\\" \';\\r\\n\\t\\t}\\r\\n\\t\\t$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'<\\/b>.\');\\r\\n\\t}\\r\\n}\\r\\n\\/\\/ End of including Thumbnails\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);\\r\\n$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true);\\r\\n$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);\\r\\n\\r\\n\\/\\/ Tables for joining\\r\\n$leftJoin = \'{\\"class\\":\\"msProductData\\",\\"alias\\":\\"Data\\",\\"on\\":\\"msProduct.id=Data.id\\"},{\\"class\\":\\"msVendor\\",\\"alias\\":\\"Vendor\\",\\"on\\":\\"Data.vendor=Vendor.id\\"}\';\\r\\nif (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}\\r\\n$select = \'\\"msProduct\\":\\"\'.$resourceColumns.\'\\",\\"Data\\":\\"\'.$dataColumns.\'\\",\\"Vendor\\":\\"\'.$vendorColumns.\'\\"\';\\r\\nif (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n\\r\\n$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n\\r\\n\\/\\/ Working\\r\\n$outer = array(\'goods\' => \'\', \'total_count\' => 0, \'total_weight\' => 0, \'total_cost\' => 0);\\r\\nforeach ($cart as $k => $v) {\\r\\n\\r\\n\\t$default = array(\\r\\n\\t\\t\'class\' => \'msProduct\'\\r\\n\\t\\t,\'where\' => \'{\\"msProduct.id\\":\\"\'.$v[\'id\'].\'\\",\\"class_key\\":\\"msProduct\\"}\'\\r\\n\\t\\t,\'leftJoin\' => \'[\'.$leftJoin.\']\'\\r\\n\\t\\t,\'select\' => \'{\'.$select.\'}\'\\r\\n\\t\\t,\'sortby\' => \'id\'\\r\\n\\t\\t,\'sortdir\' => \'ASC\'\\r\\n\\t\\t,\'groupby\' => \'msProduct.id\'\\r\\n\\t\\t,\'fastMode\' => false\\r\\n\\t\\t,\'limit\' => 0\\r\\n\\t\\t,\'return\' => \'data\'\\r\\n\\t\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n\\t);\\r\\n\\t\\/\\/ Merge all properties and run!\\r\\n\\t$pdoFetch->config = array_merge($pdoFetch->config, $default, $scriptProperties);\\r\\n\\t$rows = $pdoFetch->run();\\r\\n\\r\\n\\t\\/\\/ If not empty and relevant to the context, then show\\r\\n\\tif (!empty($rows[0]) && (empty($v[\'ctx\']) || $v[\'ctx\'] == $modx->context->key)) {\\r\\n\\t\\t$row = $rows[0];\\r\\n\\t\\t$row[\'key\'] = $k;\\r\\n\\t\\t$row[\'count\'] = $v[\'count\'];\\r\\n\\t\\t$row[\'old_price\'] = $miniShop2->formatPrice(\\r\\n\\t\\t\\t$row[\'price\'] != $v[\'price\']\\r\\n\\t\\t\\t\\t? $row[\'price\']\\r\\n\\t\\t\\t\\t: $row[\'old_price\']\\r\\n\\t\\t);\\r\\n\\t\\t$row[\'price\'] = $miniShop2->formatPrice($v[\'price\']);\\r\\n\\t\\t$row[\'weight\'] = $miniShop2->formatWeight($v[\'weight\']);\\r\\n\\t\\t$row[\'cost\'] = $miniShop2->formatPrice($v[\'count\'] * $v[\'price\']);\\r\\n\\r\\n\\t\\t\\/\\/ Additional properties of product\\r\\n\\t\\tif (!empty($v[\'options\']) && is_array($v[\'options\'])) {\\r\\n\\t\\t\\tforeach ($v[\'options\'] as $key => $value) {\\r\\n\\t\\t\\t\\t$row[\'option.\'.$key] = $value;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\tunset($v[\'options\']);\\r\\n\\r\\n        \\/\\/ Add option values\\r\\n        $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\r\\n        $row = array_merge($row, $options);\\r\\n\\r\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\t\\t$tplRow = $pdoFetch->defineChunk($row);\\r\\n\\t\\t$outer[\'goods\'] .= empty($tplRow)\\r\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', $row)\\r\\n\\t\\t\\t: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);\\r\\n\\r\\n\\t\\t$outer[\'total_count\'] += $v[\'count\'];\\r\\n\\t\\t$outer[\'total_cost\'] +=  $v[\'count\'] * $v[\'price\'];\\r\\n\\t\\t$outer[\'total_weight\'] += $v[\'count\'] * $v[\'weight\'];\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$outer[\'total_cost\'] = $miniShop2->formatPrice($outer[\'total_cost\']);\\r\\n$outer[\'total_weight\'] = $miniShop2->formatWeight($outer[\'total_weight\']);\\r\\n\\r\\nreturn empty($tplOuter)\\r\\n\\t? $pdoFetch->getChunk(\'\', $outer)\\r\\n\\t: $pdoFetch->getChunk($tplOuter, $outer, $pdoFetch->config[\'fastMode\']);"}',
        'guid' => '5399c6777902c7bc3f2e0e445a9c5b32',
        'native_key' => 0,
        'signature' => 'bacc9a42a3dc5c9cd3eb132cc58757db',
      ),
      'eac11624c9f7de2027a736db1e41b721' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msMiniCart","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\r\\n$cart = $miniShop2->cart->status();\\r\\n$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);\\r\\n$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);\\r\\n\\r\\nreturn !empty($tpl) ? $modx->getChunk($tpl, $cart) : print_r($cart,1);","locked":0,"properties":"a:1:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:12:\\"ms2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"tpl.msMiniCart\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_minicart.php","content":"\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\r\\n$cart = $miniShop2->cart->status();\\r\\n$cart[\'total_cost\'] = $miniShop2->formatPrice($cart[\'total_cost\']);\\r\\n$cart[\'total_weight\'] = $miniShop2->formatWeight($cart[\'total_weight\']);\\r\\n\\r\\nreturn !empty($tpl) ? $modx->getChunk($tpl, $cart) : print_r($cart,1);"}',
        'guid' => 'dc5966e03d3c471131b75cfd082c6ff6',
        'native_key' => 0,
        'signature' => '0d87ca772c5cb4df2bd9959f7b778298',
      ),
      '91454c311cf725d34366e2046b0257df' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msGallery","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/minishop2\\/img\\/mgr\\/extensions\\/\', true);\\r\\n\\r\\n\\/** @var msProduct $product *\\/\\r\\n$product = (!empty($product) && $product != $modx->resource->id)\\r\\n\\t? $modx->getObject(\'msProduct\', $product)\\r\\n\\t: $modx->resource;\\r\\nif (!$product || !($product instanceof msProduct)) {return \'This resource is not instance of msProduct class.\';}\\r\\n\\r\\n\\/** @var msProductData $data *\\/\\r\\n$resolution = array();\\r\\nif ($data = $product->getOne(\'Data\')) {\\r\\n\\t$data->initializeMediaSource();\\r\\n\\t$properties = $data->mediaSource->getProperties();\\r\\n\\tif (isset($properties[\'thumbnails\'][\'value\'])) {\\r\\n\\t\\t$fileTypes = $modx->fromJSON($properties[\'thumbnails\'][\'value\']);\\r\\n\\t\\tforeach ($fileTypes as $v) {\\r\\n\\t\\t\\t$resolution[] = $v[\'w\'].\'x\'.$v[\'h\'];\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\nif (empty($limit)) {$limit = 100;}\\r\\n$where = array(\\r\\n\\t\'product_id\' => $product->get(\'id\'),\\r\\n\\t\'parent\' => 0,\\r\\n);\\r\\nif (!empty($filetype)) {\\r\\n\\t$where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\r\\n}\\r\\n\\/\\/ processing additional query params\\r\\nif (!empty($scriptProperties[\'where\'])) {\\r\\n\\t$tmp = $modx->fromJSON($scriptProperties[\'where\']);\\r\\n\\tif (is_array($tmp) && !empty($tmp)) {\\r\\n\\t\\t$where = array_merge($where, $tmp);\\r\\n\\t}\\r\\n}\\r\\nunset($scriptProperties[\'where\']);\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = array(\\r\\n\\t\'class\' => \'msProductFile\'\\r\\n\\t,\'where\' => $modx->toJSON($where)\\r\\n\\t,\'select\' => \'{\\"msProductFile\\":\\"all\\"}\'\\r\\n\\t,\'limit\' => $limit\\r\\n\\t,\'sortby\' => \'rank\'\\r\\n\\t,\'sortdir\' => \'ASC\'\\r\\n\\t,\'fastMode\' => false\\r\\n\\t,\'return\' => \'data\'\\r\\n\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$scriptProperties[\'tpl\'] = !empty($tplRow) ? $tplRow : \'\';\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = null; $images = array();\\r\\n\\r\\n$pdoFetch->addTime(\'Fetching thumbnails\');\\r\\nforeach ($rows as $k => $row) {\\r\\n\\t$row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\t$images[$row[\'id\']] = $row;\\r\\n\\r\\n\\tif (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\r\\n\\t\\t$q = $modx->newQuery(\'msProductFile\', array(\'parent\' => $row[\'id\']));\\r\\n\\t\\t$q->select(\'url\');\\r\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\r\\n\\t\\t\\twhile ($url = $q->stmt->fetch(PDO::FETCH_COLUMN)) {\\r\\n\\t\\t\\t\\t$tmp = parse_url($url);\\r\\n\\t\\t\\t\\tif (preg_match(\'\\/((?:\\\\d{1,4}|)x(?:\\\\d{1,4}|))\\/\', $tmp[\'path\'], $size)) {\\r\\n\\t\\t\\t\\t\\t$images[$row[\'id\']][$size[0]] = $url;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\telseif (isset($row[\'type\'])) {\\r\\n\\t\\t$row[\'thumbnail\'] = $row[\'url\'] =  (file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\'))\\r\\n\\t\\t\\t? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'].\'.png\'\\r\\n\\t\\t\\t: MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\r\\n\\t\\tforeach ($resolution as $v) {\\r\\n\\t\\t\\t$images[$row[\'id\']][$v] = $row[\'thumbnail\'];\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n\\/\\/ Processing chunks\\r\\n$pdoFetch->addTime(\'Processing chunks\');\\r\\n$output = array();\\r\\nforeach ($images as $row) {\\r\\n\\t$tpl = $pdoFetch->defineChunk($row);\\r\\n\\t$output[] = empty($tpl)\\r\\n\\t\\t? $pdoFetch->getChunk(\'\', $row)\\r\\n\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\n\\r\\n\\/\\/ Return output\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n\\t$log .= \'<pre class=\\"msGalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n\\t$output[\'log\'] = $log;\\r\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n}\\r\\nelse {\\r\\n\\tif (count($output) === 1 && !empty($tplSingle)) {\\r\\n\\t\\t$output = $pdoFetch->getChunk($tplSingle, array_shift($images));\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\tif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\n\\t\\t$output = implode($outputSeparator, $output);\\r\\n\\r\\n\\t\\tif (!empty($tplOuter) && !empty($output)) {\\r\\n\\t\\t\\t$arr = array_shift($images);\\r\\n\\t\\t\\t$arr[\'rows\'] = $output;\\r\\n\\t\\t\\t$output = $pdoFetch->getChunk($tplOuter, $arr);\\r\\n\\t\\t}\\r\\n\\t\\telseif (empty($output)) {\\r\\n\\t\\t\\t$output = !empty($tplEmpty)\\r\\n\\t\\t\\t\\t? $pdoFetch->getChunk($tplEmpty)\\r\\n\\t\\t\\t\\t: \'\';\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$output .= $log;\\r\\n\\tif (!empty($toPlaceholder)) {\\r\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\treturn $output;\\r\\n\\t}\\r\\n}","locked":0,"properties":"a:14:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplRow\\";a:7:{s:4:\\"name\\";s:6:\\"tplRow\\";s:4:\\"desc\\";s:15:\\"ms2_prop_tplRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:17:\\"tpl.msGallery.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:19:\\"tpl.msGallery.outer\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:19:\\"tpl.msGallery.empty\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tplSingle\\";a:7:{s:4:\\"name\\";s:9:\\"tplSingle\\";s:4:\\"desc\\";s:18:\\"ms2_prop_tplSingle\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:14:\\"ms2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:100;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:15:\\"ms2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:15:\\"ms2_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"rank\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:16:\\"ms2_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:22:\\"ms2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:31:\\"ms2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:16:\\"ms2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:14:\\"ms2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"filetype\\";a:7:{s:4:\\"name\\";s:8:\\"filetype\\";s:4:\\"desc\\";s:17:\\"ms2_prop_filetype\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_gallery.php","content":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n$extensionsDir = $modx->getOption(\'extensionsDir\', $scriptProperties, \'components\\/minishop2\\/img\\/mgr\\/extensions\\/\', true);\\r\\n\\r\\n\\/** @var msProduct $product *\\/\\r\\n$product = (!empty($product) && $product != $modx->resource->id)\\r\\n\\t? $modx->getObject(\'msProduct\', $product)\\r\\n\\t: $modx->resource;\\r\\nif (!$product || !($product instanceof msProduct)) {return \'This resource is not instance of msProduct class.\';}\\r\\n\\r\\n\\/** @var msProductData $data *\\/\\r\\n$resolution = array();\\r\\nif ($data = $product->getOne(\'Data\')) {\\r\\n\\t$data->initializeMediaSource();\\r\\n\\t$properties = $data->mediaSource->getProperties();\\r\\n\\tif (isset($properties[\'thumbnails\'][\'value\'])) {\\r\\n\\t\\t$fileTypes = $modx->fromJSON($properties[\'thumbnails\'][\'value\']);\\r\\n\\t\\tforeach ($fileTypes as $v) {\\r\\n\\t\\t\\t$resolution[] = $v[\'w\'].\'x\'.$v[\'h\'];\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\nif (empty($limit)) {$limit = 100;}\\r\\n$where = array(\\r\\n\\t\'product_id\' => $product->get(\'id\'),\\r\\n\\t\'parent\' => 0,\\r\\n);\\r\\nif (!empty($filetype)) {\\r\\n\\t$where[\'type:IN\'] = array_map(\'trim\', explode(\',\', $filetype));\\r\\n}\\r\\n\\/\\/ processing additional query params\\r\\nif (!empty($scriptProperties[\'where\'])) {\\r\\n\\t$tmp = $modx->fromJSON($scriptProperties[\'where\']);\\r\\n\\tif (is_array($tmp) && !empty($tmp)) {\\r\\n\\t\\t$where = array_merge($where, $tmp);\\r\\n\\t}\\r\\n}\\r\\nunset($scriptProperties[\'where\']);\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = array(\\r\\n\\t\'class\' => \'msProductFile\'\\r\\n\\t,\'where\' => $modx->toJSON($where)\\r\\n\\t,\'select\' => \'{\\"msProductFile\\":\\"all\\"}\'\\r\\n\\t,\'limit\' => $limit\\r\\n\\t,\'sortby\' => \'rank\'\\r\\n\\t,\'sortdir\' => \'ASC\'\\r\\n\\t,\'fastMode\' => false\\r\\n\\t,\'return\' => \'data\'\\r\\n\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$scriptProperties[\'tpl\'] = !empty($tplRow) ? $tplRow : \'\';\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = null; $images = array();\\r\\n\\r\\n$pdoFetch->addTime(\'Fetching thumbnails\');\\r\\nforeach ($rows as $k => $row) {\\r\\n\\t$row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\t$images[$row[\'id\']] = $row;\\r\\n\\r\\n\\tif (isset($row[\'type\']) && $row[\'type\'] == \'image\') {\\r\\n\\t\\t$q = $modx->newQuery(\'msProductFile\', array(\'parent\' => $row[\'id\']));\\r\\n\\t\\t$q->select(\'url\');\\r\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\r\\n\\t\\t\\twhile ($url = $q->stmt->fetch(PDO::FETCH_COLUMN)) {\\r\\n\\t\\t\\t\\t$tmp = parse_url($url);\\r\\n\\t\\t\\t\\tif (preg_match(\'\\/((?:\\\\d{1,4}|)x(?:\\\\d{1,4}|))\\/\', $tmp[\'path\'], $size)) {\\r\\n\\t\\t\\t\\t\\t$images[$row[\'id\']][$size[0]] = $url;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\telseif (isset($row[\'type\'])) {\\r\\n\\t\\t$row[\'thumbnail\'] = $row[\'url\'] =  (file_exists(MODX_ASSETS_PATH . $extensionsDir . $row[\'type\'] . \'.png\'))\\r\\n\\t\\t\\t? MODX_ASSETS_URL . $extensionsDir . $row[\'type\'].\'.png\'\\r\\n\\t\\t\\t: MODX_ASSETS_URL . $extensionsDir . \'other.png\';\\r\\n\\t\\tforeach ($resolution as $v) {\\r\\n\\t\\t\\t$images[$row[\'id\']][$v] = $row[\'thumbnail\'];\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n\\/\\/ Processing chunks\\r\\n$pdoFetch->addTime(\'Processing chunks\');\\r\\n$output = array();\\r\\nforeach ($images as $row) {\\r\\n\\t$tpl = $pdoFetch->defineChunk($row);\\r\\n\\t$output[] = empty($tpl)\\r\\n\\t\\t? $pdoFetch->getChunk(\'\', $row)\\r\\n\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\n\\r\\n\\/\\/ Return output\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n\\t$log .= \'<pre class=\\"msGalleryLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n\\t$output[\'log\'] = $log;\\r\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n}\\r\\nelse {\\r\\n\\tif (count($output) === 1 && !empty($tplSingle)) {\\r\\n\\t\\t$output = $pdoFetch->getChunk($tplSingle, array_shift($images));\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\tif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\n\\t\\t$output = implode($outputSeparator, $output);\\r\\n\\r\\n\\t\\tif (!empty($tplOuter) && !empty($output)) {\\r\\n\\t\\t\\t$arr = array_shift($images);\\r\\n\\t\\t\\t$arr[\'rows\'] = $output;\\r\\n\\t\\t\\t$output = $pdoFetch->getChunk($tplOuter, $arr);\\r\\n\\t\\t}\\r\\n\\t\\telseif (empty($output)) {\\r\\n\\t\\t\\t$output = !empty($tplEmpty)\\r\\n\\t\\t\\t\\t? $pdoFetch->getChunk($tplEmpty)\\r\\n\\t\\t\\t\\t: \'\';\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t$output .= $log;\\r\\n\\tif (!empty($toPlaceholder)) {\\r\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\treturn $output;\\r\\n\\t}\\r\\n}"}',
        'guid' => 'c6f4605021650dfefdc0e1f771a338de',
        'native_key' => 0,
        'signature' => 'a64916db2e17a7b79038bbe71e3de759',
      ),
      '8167fdb76920496ec193af1badfdc8e6' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\nif (empty($product) && !empty($input)) {$product = $input;}\\r\\nif (empty($selected)) {$selected = \'\';}\\r\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\nif ((empty($name) || $name == \'id\') && !empty($options)) {$name = $options;}\\r\\n\\r\\n$output = \'\';\\r\\n$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n\\t$output = \'This resource is not instance of msProduct class.\';\\r\\n}\\r\\nelseif (!empty($name) && $options = $product->get($name)) {\\r\\n    if (!is_array($options)) {\\r\\n        $options = array($options);\\r\\n    }\\r\\n\\tif ($options[0] == \'\') {\\r\\n\\t\\t$output = !empty($tplEmpty)\\r\\n\\t\\t\\t? $pdoFetch->getChunk($tplEmpty, $scriptProperties)\\r\\n\\t\\t\\t: \'\';\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\t$rows = array();\\r\\n\\t\\tforeach ($options as $value) {\\r\\n\\t\\t\\t$pls = array(\\r\\n\\t\\t\\t\\t\'value\' => $value\\r\\n\\t\\t\\t\\t,\'selected\' => $value == $selected ? \'selected\' : \'\'\\r\\n\\t\\t\\t);\\r\\n\\t\\t\\t$rows[] = empty($tplRow) ? $value : $pdoFetch->getChunk($tplRow, $pls);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t$rows = implode($outputSeparator, $rows);\\r\\n\\t\\t$output = empty($tplOuter)\\r\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', array(\'name\' => $name, \'rows\' => $rows))\\r\\n\\t\\t\\t: $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, array(\'name\' => $name, \'rows\' => $rows)));\\r\\n\\t}\\r\\n}\\r\\n\\r\\nreturn $output;","locked":0,"properties":"a:7:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplRow\\";a:7:{s:4:\\"name\\";s:6:\\"tplRow\\";s:4:\\"desc\\";s:15:\\"ms2_prop_tplRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:17:\\"tpl.msOptions.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:19:\\"tpl.msOptions.outer\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"name\\";a:7:{s:4:\\"name\\";s:4:\\"name\\";s:4:\\"desc\\";s:13:\\"ms2_prop_name\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"selected\\";a:7:{s:4:\\"name\\";s:8:\\"selected\\";s:4:\\"desc\\";s:17:\\"ms2_prop_selected\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:24:\\"ms2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_options.php","content":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\nif (empty($product) && !empty($input)) {$product = $input;}\\r\\nif (empty($selected)) {$selected = \'\';}\\r\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\nif ((empty($name) || $name == \'id\') && !empty($options)) {$name = $options;}\\r\\n\\r\\n$output = \'\';\\r\\n$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n\\t$output = \'This resource is not instance of msProduct class.\';\\r\\n}\\r\\nelseif (!empty($name) && $options = $product->get($name)) {\\r\\n    if (!is_array($options)) {\\r\\n        $options = array($options);\\r\\n    }\\r\\n\\tif ($options[0] == \'\') {\\r\\n\\t\\t$output = !empty($tplEmpty)\\r\\n\\t\\t\\t? $pdoFetch->getChunk($tplEmpty, $scriptProperties)\\r\\n\\t\\t\\t: \'\';\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\t$rows = array();\\r\\n\\t\\tforeach ($options as $value) {\\r\\n\\t\\t\\t$pls = array(\\r\\n\\t\\t\\t\\t\'value\' => $value\\r\\n\\t\\t\\t\\t,\'selected\' => $value == $selected ? \'selected\' : \'\'\\r\\n\\t\\t\\t);\\r\\n\\t\\t\\t$rows[] = empty($tplRow) ? $value : $pdoFetch->getChunk($tplRow, $pls);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t$rows = implode($outputSeparator, $rows);\\r\\n\\t\\t$output = empty($tplOuter)\\r\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', array(\'name\' => $name, \'rows\' => $rows))\\r\\n\\t\\t\\t: $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, array(\'name\' => $name, \'rows\' => $rows)));\\r\\n\\t}\\r\\n}\\r\\n\\r\\nreturn $output;"}',
        'guid' => 'd1f54205a3607f099fb95029b8446f6e',
        'native_key' => 0,
        'signature' => 'eed3a275a6dcde45e7e4275835a7e643',
      ),
      'b4e7ad8342e5343cae48d56873c28677' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n\\tif ($order = $modx->getObject(\'msOrder\', $_GET[\'msorder\'])) {\\r\\n\\t\\tif ((!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($_GET[\'msorder\'], $_SESSION[\'minishop2\'][\'orders\'])) || $order->get(\'user_id\') == $modx->user->id || $modx->context->key == \'mgr\') {\\r\\n\\t\\t\\tif (empty($tplSuccess)) {$tplSuccess = \'tpl.msOrder.success\';}\\r\\n\\t\\t\\treturn $pdoFetch->getChunk($tplSuccess, array(\'id\' => $_GET[\'msorder\']));\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$cart = $miniShop2->cart->get();\\r\\n$status = $miniShop2->cart->status();\\r\\n$order = $miniShop2->order->get();\\r\\nif (empty($status[\'total_count\'])) {\\r\\n\\treturn !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';\\r\\n}\\r\\n\\r\\n$deliveryColumns = $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\');\\r\\n$paymentColumns = $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = array(\\r\\n\\t\'class\' => \'msDelivery\'\\r\\n\\t,\'where\' => \'{\\"active\\":1}\'\\r\\n\\t,\'select\' => \'{\\"msDelivery\\":\\"all\\"}\'\\r\\n\\t,\'sortby\' => \'rank\'\\r\\n\\t,\'sortdir\' => \'ASC\'\\r\\n\\t,\'return\' => \'data\'\\r\\n\\t,\'fastMode\' => false\\r\\n\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$deliveries = $pdoFetch->run();\\r\\n$pdoFetch->addTime(\'Fetched deliveries.\');\\r\\n\\r\\n$arrays = array(\'deliveries\' => array(),\'payments\' => array());\\r\\nif (!empty($deliveries)) {\\r\\n\\tforeach ($deliveries as $di => $delivery) {\\r\\n\\t\\t$did = $delivery[\'id\'];\\r\\n\\t\\tif (empty($order[\'delivery\']) && $di == 0) {\\r\\n\\t\\t\\t$miniShop2->order->add(\'delivery\', $did);\\r\\n\\t\\t\\t$order = $miniShop2->order->get();\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t$delivery[\'payments\'] = array();\\r\\n\\t\\t$pdoFetch->config = array_merge($pdoFetch->config, array(\\r\\n\\t\\t\\t\'class\' => \'msPayment\'\\r\\n\\t\\t\\t,\'innerJoin\' => \'[{\\"class\\":\\"msDeliveryMember\\",\\"alias\\":\\"Member\\",\\"on\\":\\"Member.delivery_id=\'.$delivery[\'id\'].\' AND Member.payment_id=msPayment.id\\"}]\'\\r\\n\\t\\t\\t,\'select\' => \'{\\"msPayment\\":\\"all\\"}\'\\r\\n\\t\\t));\\r\\n\\t\\t$pdoFetch->addTime(\'Fetched payments for delivery \'.$delivery[\'name\'].\'.\');\\r\\n\\t\\t$payments = $pdoFetch->run();\\r\\n\\t\\tif (!empty($payments)) {\\r\\n\\t\\t\\tforeach ($payments as $pi => $payment) {\\r\\n\\t\\t\\t\\t$pdoFetch->addTime(\'Processing payment \'.$payment[\'name\'].\'.\');\\r\\n\\t\\t\\t\\t$pid = $payment[\'id\'];\\r\\n\\t\\t\\t\\tif (empty($order[\'payment\']) && $pi == 0) {\\r\\n\\t\\t\\t\\t\\t$miniShop2->order->add(\'payment\', $pid);\\r\\n\\t\\t\\t\\t\\t$order = $miniShop2->order->get();\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif (!array_key_exists($pid, $arrays[\'payments\'])) {\\r\\n\\t\\t\\t\\t\\t$payment[\'checked\'] = !empty($order[\'payment\']) && $order[\'payment\'] == $pid ? \'checked\' : \'\';\\r\\n\\t\\t\\t\\t\\t$arrays[\'payments\'][$pid] = empty($tplPayment)\\r\\n\\t\\t\\t\\t\\t\\t? $pdoFetch->getChunk(\'\', $payment)\\r\\n\\t\\t\\t\\t\\t\\t: $pdoFetch->getChunk($tplPayment, $payment);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t$delivery[\'payments\'][] = $pid;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t$pdoFetch->addTime(\'Processing delivery \'.$delivery[\'name\'].\'.\');\\r\\n\\t\\t$delivery[\'checked\'] = !empty($order[\'delivery\']) && $order[\'delivery\'] == $did ? \'checked\' : \'\';\\r\\n\\t\\t$delivery[\'payments\'] = $modx->toJSON($delivery[\'payments\']);\\r\\n\\t\\t$arrays[\'deliveries\'][$did] = empty($tplDelivery)\\r\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', $delivery)\\r\\n\\t\\t\\t: $pdoFetch->getChunk($tplDelivery, $delivery);\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$order_cost = $miniShop2->order->getcost();\\r\\n$deliveries = implode(\'\', $arrays[\'deliveries\']);\\r\\n$payments = implode(\'\', $arrays[\'payments\']);\\r\\n$form = array(\\r\\n\\t\'deliveries\' => $deliveries\\r\\n\\t,\'payments\' => $payments\\r\\n\\t,\'order_cost\' => $miniShop2->formatPrice($order_cost[\'data\'][\'cost\'])\\r\\n);\\r\\n\\r\\n\\/\\/ Setting user fields\\r\\nif ($isAuthenticated = $modx->user->isAuthenticated()) {\\r\\n\\t$profile = $modx->user->Profile->toArray();\\r\\n}\\r\\n$user_fields = array(\\r\\n\\t\'receiver\' => \'fullname\',\\r\\n\\t\'phone\' => \'phone\',\\r\\n\\t\'email\' => \'email\',\\r\\n\\t\'comment\' => \'extended[comment]\',\\r\\n\\t\'index\' => \'zip\',\\r\\n\\t\'country\' => \'country\',\\r\\n\\t\'region\' => \'state\',\\r\\n\\t\'city\' => \'city\',\\r\\n\\t\'street\' => \'address\',\\r\\n\\t\'building\' => \'extended[building]\',\\r\\n\\t\'room\' => \'extended[room]\',\\r\\n);\\r\\nforeach ($user_fields as $key => $value) {\\r\\n\\tif (!empty($profile) && !empty($value)) {\\r\\n\\t\\tif (strpos($value, \'extended\') !== false) {\\r\\n\\t\\t\\t$tmp = substr($value, 9, -1);\\r\\n\\t\\t\\t$value = !empty($profile[\'extended\'][$tmp])\\r\\n\\t\\t\\t\\t? $profile[\'extended\'][$tmp]\\r\\n\\t\\t\\t\\t: \'\';\\r\\n\\t\\t}\\r\\n\\t\\telse {\\r\\n\\t\\t\\t$value = $profile[$value];\\r\\n\\t\\t}\\r\\n\\t\\t$tmp = $miniShop2->order->add($key, $value);\\r\\n\\t\\tif ($tmp[\'success\'] && !empty($tmp[\'data\'][$key])) {\\r\\n\\t\\t\\t$form[$key] = $tmp[\'data\'][$key];\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\tif (empty($form[$key]) && !empty($order[$key])) {\\r\\n\\t\\t$form[$key] = $order[$key];\\r\\n\\t\\tunset($order[$key]);\\r\\n\\t}\\r\\n}\\r\\n$form = array_merge($order, $form);\\r\\n$form[\'errors\'] = array();\\r\\n\\r\\nif (!empty($_POST)) {\\r\\n\\t$response = $miniShop2->order->getDeliveryRequiresFields();\\r\\n\\t$requires = $response[\'data\'][\'requires\'];\\r\\n\\r\\n\\tforeach ($_POST as $field => $val) {\\r\\n\\t\\t$validated = $miniShop2->order->validate($field, $val);\\r\\n\\t\\tif ((in_array($field, $requires) && empty($validated))) {\\r\\n\\t\\t\\t$form[\'errors\'][$field] = \'error\';\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$output = empty($tplOuter)\\r\\n\\t? $pdoFetch->getChunk(\'\', $form)\\r\\n\\t: $pdoFetch->getChunk($tplOuter, $form);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n\\t$output .= \'<pre class=\\"msOrderLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nreturn $output;","locked":0,"properties":"a:5:{s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:17:\\"tpl.msOrder.outer\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplPayment\\";a:7:{s:4:\\"name\\";s:10:\\"tplPayment\\";s:4:\\"desc\\";s:19:\\"ms2_prop_tplPayment\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:19:\\"tpl.msOrder.payment\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplDelivery\\";a:7:{s:4:\\"name\\";s:11:\\"tplDelivery\\";s:4:\\"desc\\";s:20:\\"ms2_prop_tplDelivery\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.msOrder.delivery\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplSuccess\\";a:7:{s:4:\\"name\\";s:10:\\"tplSuccess\\";s:4:\\"desc\\";s:19:\\"ms2_prop_tplSuccess\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:19:\\"tpl.msOrder.success\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_order.php","content":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\r\\n\\r\\nif (!empty($_GET[\'msorder\'])) {\\r\\n\\tif ($order = $modx->getObject(\'msOrder\', $_GET[\'msorder\'])) {\\r\\n\\t\\tif ((!empty($_SESSION[\'minishop2\'][\'orders\']) && in_array($_GET[\'msorder\'], $_SESSION[\'minishop2\'][\'orders\'])) || $order->get(\'user_id\') == $modx->user->id || $modx->context->key == \'mgr\') {\\r\\n\\t\\t\\tif (empty($tplSuccess)) {$tplSuccess = \'tpl.msOrder.success\';}\\r\\n\\t\\t\\treturn $pdoFetch->getChunk($tplSuccess, array(\'id\' => $_GET[\'msorder\']));\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$cart = $miniShop2->cart->get();\\r\\n$status = $miniShop2->cart->status();\\r\\n$order = $miniShop2->order->get();\\r\\nif (empty($status[\'total_count\'])) {\\r\\n\\treturn !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';\\r\\n}\\r\\n\\r\\n$deliveryColumns = $modx->getSelectColumns(\'msDelivery\', \'msDelivery\', \'delivery_\');\\r\\n$paymentColumns = $modx->getSelectColumns(\'msPayment\', \'msPayment\', \'payment_\');\\r\\n\\r\\n\\/\\/ Default parameters\\r\\n$default = array(\\r\\n\\t\'class\' => \'msDelivery\'\\r\\n\\t,\'where\' => \'{\\"active\\":1}\'\\r\\n\\t,\'select\' => \'{\\"msDelivery\\":\\"all\\"}\'\\r\\n\\t,\'sortby\' => \'rank\'\\r\\n\\t,\'sortdir\' => \'ASC\'\\r\\n\\t,\'return\' => \'data\'\\r\\n\\t,\'fastMode\' => false\\r\\n\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$deliveries = $pdoFetch->run();\\r\\n$pdoFetch->addTime(\'Fetched deliveries.\');\\r\\n\\r\\n$arrays = array(\'deliveries\' => array(),\'payments\' => array());\\r\\nif (!empty($deliveries)) {\\r\\n\\tforeach ($deliveries as $di => $delivery) {\\r\\n\\t\\t$did = $delivery[\'id\'];\\r\\n\\t\\tif (empty($order[\'delivery\']) && $di == 0) {\\r\\n\\t\\t\\t$miniShop2->order->add(\'delivery\', $did);\\r\\n\\t\\t\\t$order = $miniShop2->order->get();\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t$delivery[\'payments\'] = array();\\r\\n\\t\\t$pdoFetch->config = array_merge($pdoFetch->config, array(\\r\\n\\t\\t\\t\'class\' => \'msPayment\'\\r\\n\\t\\t\\t,\'innerJoin\' => \'[{\\"class\\":\\"msDeliveryMember\\",\\"alias\\":\\"Member\\",\\"on\\":\\"Member.delivery_id=\'.$delivery[\'id\'].\' AND Member.payment_id=msPayment.id\\"}]\'\\r\\n\\t\\t\\t,\'select\' => \'{\\"msPayment\\":\\"all\\"}\'\\r\\n\\t\\t));\\r\\n\\t\\t$pdoFetch->addTime(\'Fetched payments for delivery \'.$delivery[\'name\'].\'.\');\\r\\n\\t\\t$payments = $pdoFetch->run();\\r\\n\\t\\tif (!empty($payments)) {\\r\\n\\t\\t\\tforeach ($payments as $pi => $payment) {\\r\\n\\t\\t\\t\\t$pdoFetch->addTime(\'Processing payment \'.$payment[\'name\'].\'.\');\\r\\n\\t\\t\\t\\t$pid = $payment[\'id\'];\\r\\n\\t\\t\\t\\tif (empty($order[\'payment\']) && $pi == 0) {\\r\\n\\t\\t\\t\\t\\t$miniShop2->order->add(\'payment\', $pid);\\r\\n\\t\\t\\t\\t\\t$order = $miniShop2->order->get();\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif (!array_key_exists($pid, $arrays[\'payments\'])) {\\r\\n\\t\\t\\t\\t\\t$payment[\'checked\'] = !empty($order[\'payment\']) && $order[\'payment\'] == $pid ? \'checked\' : \'\';\\r\\n\\t\\t\\t\\t\\t$arrays[\'payments\'][$pid] = empty($tplPayment)\\r\\n\\t\\t\\t\\t\\t\\t? $pdoFetch->getChunk(\'\', $payment)\\r\\n\\t\\t\\t\\t\\t\\t: $pdoFetch->getChunk($tplPayment, $payment);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t$delivery[\'payments\'][] = $pid;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t$pdoFetch->addTime(\'Processing delivery \'.$delivery[\'name\'].\'.\');\\r\\n\\t\\t$delivery[\'checked\'] = !empty($order[\'delivery\']) && $order[\'delivery\'] == $did ? \'checked\' : \'\';\\r\\n\\t\\t$delivery[\'payments\'] = $modx->toJSON($delivery[\'payments\']);\\r\\n\\t\\t$arrays[\'deliveries\'][$did] = empty($tplDelivery)\\r\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', $delivery)\\r\\n\\t\\t\\t: $pdoFetch->getChunk($tplDelivery, $delivery);\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$order_cost = $miniShop2->order->getcost();\\r\\n$deliveries = implode(\'\', $arrays[\'deliveries\']);\\r\\n$payments = implode(\'\', $arrays[\'payments\']);\\r\\n$form = array(\\r\\n\\t\'deliveries\' => $deliveries\\r\\n\\t,\'payments\' => $payments\\r\\n\\t,\'order_cost\' => $miniShop2->formatPrice($order_cost[\'data\'][\'cost\'])\\r\\n);\\r\\n\\r\\n\\/\\/ Setting user fields\\r\\nif ($isAuthenticated = $modx->user->isAuthenticated()) {\\r\\n\\t$profile = $modx->user->Profile->toArray();\\r\\n}\\r\\n$user_fields = array(\\r\\n\\t\'receiver\' => \'fullname\',\\r\\n\\t\'phone\' => \'phone\',\\r\\n\\t\'email\' => \'email\',\\r\\n\\t\'comment\' => \'extended[comment]\',\\r\\n\\t\'index\' => \'zip\',\\r\\n\\t\'country\' => \'country\',\\r\\n\\t\'region\' => \'state\',\\r\\n\\t\'city\' => \'city\',\\r\\n\\t\'street\' => \'address\',\\r\\n\\t\'building\' => \'extended[building]\',\\r\\n\\t\'room\' => \'extended[room]\',\\r\\n);\\r\\nforeach ($user_fields as $key => $value) {\\r\\n\\tif (!empty($profile) && !empty($value)) {\\r\\n\\t\\tif (strpos($value, \'extended\') !== false) {\\r\\n\\t\\t\\t$tmp = substr($value, 9, -1);\\r\\n\\t\\t\\t$value = !empty($profile[\'extended\'][$tmp])\\r\\n\\t\\t\\t\\t? $profile[\'extended\'][$tmp]\\r\\n\\t\\t\\t\\t: \'\';\\r\\n\\t\\t}\\r\\n\\t\\telse {\\r\\n\\t\\t\\t$value = $profile[$value];\\r\\n\\t\\t}\\r\\n\\t\\t$tmp = $miniShop2->order->add($key, $value);\\r\\n\\t\\tif ($tmp[\'success\'] && !empty($tmp[\'data\'][$key])) {\\r\\n\\t\\t\\t$form[$key] = $tmp[\'data\'][$key];\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\tif (empty($form[$key]) && !empty($order[$key])) {\\r\\n\\t\\t$form[$key] = $order[$key];\\r\\n\\t\\tunset($order[$key]);\\r\\n\\t}\\r\\n}\\r\\n$form = array_merge($order, $form);\\r\\n$form[\'errors\'] = array();\\r\\n\\r\\nif (!empty($_POST)) {\\r\\n\\t$response = $miniShop2->order->getDeliveryRequiresFields();\\r\\n\\t$requires = $response[\'data\'][\'requires\'];\\r\\n\\r\\n\\tforeach ($_POST as $field => $val) {\\r\\n\\t\\t$validated = $miniShop2->order->validate($field, $val);\\r\\n\\t\\tif ((in_array($field, $requires) && empty($validated))) {\\r\\n\\t\\t\\t$form[\'errors\'][$field] = \'error\';\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n$output = empty($tplOuter)\\r\\n\\t? $pdoFetch->getChunk(\'\', $form)\\r\\n\\t: $pdoFetch->getChunk($tplOuter, $form);\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n\\t$output .= \'<pre class=\\"msOrderLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nreturn $output;"}',
        'guid' => 'a55cdfad2fbca93ffa60498b6b53c213',
        'native_key' => 0,
        'signature' => '416823034c2be91a618eb2b168ffa74b',
      ),
      'c486ebf4b72509672a4f6dbef010b2a6' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msGetOrder","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"if (empty($id)) {return $modx->lexicon(\'ms2_err_order_nf\');}\\r\\n\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n\\/* @var msOrder $order *\\/\\r\\nif (!$order = $modx->getObject(\'msOrder\', $id)) {return $modx->lexicon(\'ms2_err_order_nf\');}\\r\\nif ((empty($_SESSION[\'minishop2\'][\'orders\']) || !in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) && $order->get(\'user_id\') != $modx->user->id && $modx->context->key != \'mgr\') {\\r\\n\\treturn !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';\\r\\n}\\r\\n\\r\\n$user = $order->getOne(\'User\');\\r\\nif ($user) {\\r\\n\\t$user = $user->getOne(\'Profile\');\\r\\n}\\r\\n$address = $order->getOne(\'Address\');\\r\\n$delivery = $order->getOne(\'Delivery\');\\r\\n$payment = $order->getOne(\'Payment\');\\r\\n$outer = array_merge($order->toArray(), array(\\r\\n\\t\'user\' => $user ? $user->toArray() : array(),\\r\\n\\t\'address\' => $address ? $address->toArray() : array(),\\r\\n\\t\'delivery\' => $delivery ? $delivery->toArray() : array(),\\r\\n\\t\'payment\' => $payment ? $payment->toArray() : array(),\\r\\n));\\r\\n\\r\\n$outer[\'goods\'] = \'\';\\r\\n$outer[\'cart_count\'] = 0;\\r\\n$outer[\'cost\'] = $miniShop2->formatPrice($outer[\'cost\']);\\r\\n$outer[\'cart_cost\'] = $miniShop2->formatPrice($outer[\'cart_cost\']);\\r\\n$outer[\'delivery_cost\'] = $miniShop2->formatPrice($outer[\'delivery_cost\']);\\r\\n$outer[\'weight\'] = $outer[\'cart_weight\'] = $miniShop2->formatWeight($outer[\'weight\']);\\r\\n\\r\\n\\/\\/ Include Thumbnails\\r\\n$thumbsLeftJoin = \'\';\\r\\n$thumbsSelect = array();\\r\\nif (!empty($includeThumbs)) {\\r\\n\\t$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));\\r\\n\\tif(!empty($thumbs[0])){\\r\\n\\t\\tforeach ($thumbs as $thumb) {\\r\\n\\t\\t\\t$thumbsLeftJoin .= \',{\\"class\\":\\"msProductFile\\",\\"alias\\":\\"\'.$thumb.\'\\",\\"on\\":\\"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\\\'%\\/\'.$thumb.\'\\/\\\\\'\\"}\';\\r\\n\\t\\t\\t$thumbsSelect[] = \' \\"\'.$thumb.\'\\":\\"\'.$thumb.\'.url as \'.$thumb.\'\\" \';\\r\\n\\t\\t}\\r\\n\\t\\t$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'<\\/b>.\');\\r\\n\\t}\\r\\n}\\r\\n\\/\\/ End of including Thumbnails\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);\\r\\n$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true) . \',`Data`.`price` as `original_price`\';\\r\\n$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);\\r\\n$orderProductColumns = $modx->getSelectColumns(\'msOrderProduct\', \'msOrderProduct\', \'\', array(\'id\'), true);\\r\\n\\r\\n\\/\\/ Tables for joining\\r\\n$leftJoin = \'{\\"class\\":\\"msProduct\\",\\"alias\\":\\"msProduct\\",\\"on\\":\\"msProduct.id=msOrderProduct.product_id\\"},{\\"class\\":\\"msProductData\\",\\"alias\\":\\"Data\\",\\"on\\":\\"msProduct.id=Data.id\\"},{\\"class\\":\\"msVendor\\",\\"alias\\":\\"Vendor\\",\\"on\\":\\"Data.vendor=Vendor.id\\"}\';\\r\\nif (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}\\r\\n$select = \'\\"msProduct\\":\\"\'.$resourceColumns.\'\\",\\"Data\\":\\"\'.$dataColumns.\'\\",\\"OrderProduct\\":\\"\'.$orderProductColumns.\'\\",\\"Vendor\\":\\"\'.$vendorColumns.\'\\"\';\\r\\nif (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}\\r\\n\\r\\n$default = array(\\r\\n\\t\'class\' => \'msOrderProduct\'\\r\\n\\t,\'where\' => \'{\\"msOrderProduct.order_id\\":\\"\'.$id.\'\\"}\'\\r\\n\\t,\'leftJoin\' => \'[\'.$leftJoin.\']\'\\r\\n\\t,\'select\' => \'{\'.$select.\'}\'\\r\\n\\t,\'sortby\' => \'id\'\\r\\n\\t,\'sortdir\' => \'ASC\'\\r\\n\\t,\'groupby\' => \'msOrderProduct.id\'\\r\\n\\t,\'fastMode\' => false\\r\\n\\t,\'limit\' => 0\\r\\n\\t,\'return\' => \'data\'\\r\\n\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n);\\r\\n\\/\\/ Merge all properties and run!\\r\\n$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/** @var msOrderProduct $row *\\/\\r\\nforeach ($rows as $row) {\\r\\n\\t$outer[\'cart_count\'] += $row[\'count\'];\\r\\n\\t$row[\'old_price\'] = $miniShop2->formatPrice(\\r\\n\\t\\t$row[\'original_price\'] != $row[\'price\']\\r\\n\\t\\t\\t? $row[\'original_price\']\\r\\n\\t\\t\\t: $row[\'old_price\']\\r\\n\\t);\\r\\n\\t$row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\r\\n\\t$row[\'cost\'] = $miniShop2->formatPrice($row[\'cost\']);\\r\\n\\t$row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\r\\n\\r\\n\\t$row[\'id\'] = (integer) $row[\'id\'];\\r\\n\\tif (empty($row[\'name\'])) {\\r\\n\\t\\t$row[\'name\'] = $row[\'pagetitle\'];\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\t$row[\'pagetitle\'] = $row[\'name\'];\\r\\n\\t}\\r\\n\\t$row[\'link\'] = !empty($row[\'id\'])\\r\\n\\t\\t? $row[\'link\'] = $modx->makeUrl($row[\'id\'], \'\', \'\', \'full\')\\r\\n\\t\\t: \'\';\\r\\n\\r\\n\\t\\/\\/ Additional properties of product\\r\\n\\t$options = !is_array($row[\'options\'])\\r\\n\\t\\t? $modx->fromJSON($row[\'options\'])\\r\\n\\t\\t: $row[\'options\'];\\r\\n\\tif (!empty($options) && is_array($options)) {\\r\\n\\t\\tforeach ($options as $key => $value) {\\r\\n\\t\\t\\t$row[\'option.\'.$key] = $value;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n    \\/\\/ Add option values\\r\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\r\\n    $row = array_merge($row, $options);\\r\\n\\r\\n\\t$row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\t$tplRow = $pdoFetch->defineChunk($row);\\r\\n\\t$outer[\'goods\'] .= empty($tplRow)\\r\\n\\t\\t? $pdoFetch->getChunk(\'\', $row)\\r\\n\\t\\t: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);\\r\\n}\\r\\n\\r\\nif (empty($tplOuter)) {\\r\\n\\t$modx->toPlaceholders($outer);\\r\\n}\\r\\nelse {\\r\\n\\treturn $pdoFetch->getChunk($tplOuter, $outer);\\r\\n}","locked":0,"properties":"a:5:{s:6:\\"tplRow\\";a:7:{s:4:\\"name\\";s:6:\\"tplRow\\";s:4:\\"desc\\";s:15:\\"ms2_prop_tplRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.msGetOrder.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:19:\\"ms2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"includeThumbs\\";a:7:{s:4:\\"name\\";s:13:\\"includeThumbs\\";s:4:\\"desc\\";s:22:\\"ms2_prop_includeThumbs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_get_order.php","content":"if (empty($id)) {return $modx->lexicon(\'ms2_err_order_nf\');}\\r\\n\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n\\/* @var msOrder $order *\\/\\r\\nif (!$order = $modx->getObject(\'msOrder\', $id)) {return $modx->lexicon(\'ms2_err_order_nf\');}\\r\\nif ((empty($_SESSION[\'minishop2\'][\'orders\']) || !in_array($id, $_SESSION[\'minishop2\'][\'orders\'])) && $order->get(\'user_id\') != $modx->user->id && $modx->context->key != \'mgr\') {\\r\\n\\treturn !empty($tplEmpty) ? $pdoFetch->getChunk($tplEmpty) : \'\';\\r\\n}\\r\\n\\r\\n$user = $order->getOne(\'User\');\\r\\nif ($user) {\\r\\n\\t$user = $user->getOne(\'Profile\');\\r\\n}\\r\\n$address = $order->getOne(\'Address\');\\r\\n$delivery = $order->getOne(\'Delivery\');\\r\\n$payment = $order->getOne(\'Payment\');\\r\\n$outer = array_merge($order->toArray(), array(\\r\\n\\t\'user\' => $user ? $user->toArray() : array(),\\r\\n\\t\'address\' => $address ? $address->toArray() : array(),\\r\\n\\t\'delivery\' => $delivery ? $delivery->toArray() : array(),\\r\\n\\t\'payment\' => $payment ? $payment->toArray() : array(),\\r\\n));\\r\\n\\r\\n$outer[\'goods\'] = \'\';\\r\\n$outer[\'cart_count\'] = 0;\\r\\n$outer[\'cost\'] = $miniShop2->formatPrice($outer[\'cost\']);\\r\\n$outer[\'cart_cost\'] = $miniShop2->formatPrice($outer[\'cart_cost\']);\\r\\n$outer[\'delivery_cost\'] = $miniShop2->formatPrice($outer[\'delivery_cost\']);\\r\\n$outer[\'weight\'] = $outer[\'cart_weight\'] = $miniShop2->formatWeight($outer[\'weight\']);\\r\\n\\r\\n\\/\\/ Include Thumbnails\\r\\n$thumbsLeftJoin = \'\';\\r\\n$thumbsSelect = array();\\r\\nif (!empty($includeThumbs)) {\\r\\n\\t$thumbs = array_map(\'trim\',explode(\',\',$includeThumbs));\\r\\n\\tif(!empty($thumbs[0])){\\r\\n\\t\\tforeach ($thumbs as $thumb) {\\r\\n\\t\\t\\t$thumbsLeftJoin .= \',{\\"class\\":\\"msProductFile\\",\\"alias\\":\\"\'.$thumb.\'\\",\\"on\\":\\"\'.$thumb.\'.product_id = msProduct.id AND \'.$thumb.\'.parent != 0 AND \'.$thumb.\'.path LIKE \\\\\'%\\/\'.$thumb.\'\\/\\\\\'\\"}\';\\r\\n\\t\\t\\t$thumbsSelect[] = \' \\"\'.$thumb.\'\\":\\"\'.$thumb.\'.url as \'.$thumb.\'\\" \';\\r\\n\\t\\t}\\r\\n\\t\\t$pdoFetch->addTime(\'Included list of thumbnails: <b>\'.implode(\', \',$thumbs).\'<\\/b>.\');\\r\\n\\t}\\r\\n}\\r\\n\\/\\/ End of including Thumbnails\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$resourceColumns = !empty($includeContent) ?  $modx->getSelectColumns(\'msProduct\', \'msProduct\') : $modx->getSelectColumns(\'msProduct\', \'msProduct\', \'\', array(\'content\'), true);\\r\\n$dataColumns = $modx->getSelectColumns(\'msProductData\', \'Data\', \'\', array(\'id\'), true) . \',`Data`.`price` as `original_price`\';\\r\\n$vendorColumns = $modx->getSelectColumns(\'msVendor\', \'Vendor\', \'vendor.\', array(\'id\'), true);\\r\\n$orderProductColumns = $modx->getSelectColumns(\'msOrderProduct\', \'msOrderProduct\', \'\', array(\'id\'), true);\\r\\n\\r\\n\\/\\/ Tables for joining\\r\\n$leftJoin = \'{\\"class\\":\\"msProduct\\",\\"alias\\":\\"msProduct\\",\\"on\\":\\"msProduct.id=msOrderProduct.product_id\\"},{\\"class\\":\\"msProductData\\",\\"alias\\":\\"Data\\",\\"on\\":\\"msProduct.id=Data.id\\"},{\\"class\\":\\"msVendor\\",\\"alias\\":\\"Vendor\\",\\"on\\":\\"Data.vendor=Vendor.id\\"}\';\\r\\nif (!empty($thumbsLeftJoin)) {$leftJoin .= $thumbsLeftJoin;}\\r\\n$select = \'\\"msProduct\\":\\"\'.$resourceColumns.\'\\",\\"Data\\":\\"\'.$dataColumns.\'\\",\\"OrderProduct\\":\\"\'.$orderProductColumns.\'\\",\\"Vendor\\":\\"\'.$vendorColumns.\'\\"\';\\r\\nif (!empty($thumbsSelect)) {$select .= \',\'.implode(\',\', $thumbsSelect);}\\r\\n\\r\\n$default = array(\\r\\n\\t\'class\' => \'msOrderProduct\'\\r\\n\\t,\'where\' => \'{\\"msOrderProduct.order_id\\":\\"\'.$id.\'\\"}\'\\r\\n\\t,\'leftJoin\' => \'[\'.$leftJoin.\']\'\\r\\n\\t,\'select\' => \'{\'.$select.\'}\'\\r\\n\\t,\'sortby\' => \'id\'\\r\\n\\t,\'sortdir\' => \'ASC\'\\r\\n\\t,\'groupby\' => \'msOrderProduct.id\'\\r\\n\\t,\'fastMode\' => false\\r\\n\\t,\'limit\' => 0\\r\\n\\t,\'return\' => \'data\'\\r\\n\\t,\'nestedChunkPrefix\' => \'minishop2_\'\\r\\n);\\r\\n\\/\\/ Merge all properties and run!\\r\\n$scriptProperties[\'tpl\'] = $scriptProperties[\'tplRow\'];\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/** @var msOrderProduct $row *\\/\\r\\nforeach ($rows as $row) {\\r\\n\\t$outer[\'cart_count\'] += $row[\'count\'];\\r\\n\\t$row[\'old_price\'] = $miniShop2->formatPrice(\\r\\n\\t\\t$row[\'original_price\'] != $row[\'price\']\\r\\n\\t\\t\\t? $row[\'original_price\']\\r\\n\\t\\t\\t: $row[\'old_price\']\\r\\n\\t);\\r\\n\\t$row[\'price\'] = $miniShop2->formatPrice($row[\'price\']);\\r\\n\\t$row[\'cost\'] = $miniShop2->formatPrice($row[\'cost\']);\\r\\n\\t$row[\'weight\'] = $miniShop2->formatWeight($row[\'weight\']);\\r\\n\\r\\n\\t$row[\'id\'] = (integer) $row[\'id\'];\\r\\n\\tif (empty($row[\'name\'])) {\\r\\n\\t\\t$row[\'name\'] = $row[\'pagetitle\'];\\r\\n\\t}\\r\\n\\telse {\\r\\n\\t\\t$row[\'pagetitle\'] = $row[\'name\'];\\r\\n\\t}\\r\\n\\t$row[\'link\'] = !empty($row[\'id\'])\\r\\n\\t\\t? $row[\'link\'] = $modx->makeUrl($row[\'id\'], \'\', \'\', \'full\')\\r\\n\\t\\t: \'\';\\r\\n\\r\\n\\t\\/\\/ Additional properties of product\\r\\n\\t$options = !is_array($row[\'options\'])\\r\\n\\t\\t? $modx->fromJSON($row[\'options\'])\\r\\n\\t\\t: $row[\'options\'];\\r\\n\\tif (!empty($options) && is_array($options)) {\\r\\n\\t\\tforeach ($options as $key => $value) {\\r\\n\\t\\t\\t$row[\'option.\'.$key] = $value;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n    \\/\\/ Add option values\\r\\n    $options = $modx->call(\'msProductData\', \'loadOptions\', array(&$modx, $row[\'id\']));\\r\\n    $row = array_merge($row, $options);\\r\\n\\r\\n\\t$row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\t$tplRow = $pdoFetch->defineChunk($row);\\r\\n\\t$outer[\'goods\'] .= empty($tplRow)\\r\\n\\t\\t? $pdoFetch->getChunk(\'\', $row)\\r\\n\\t\\t: $pdoFetch->getChunk($tplRow, $row, $pdoFetch->config[\'fastMode\']);\\r\\n}\\r\\n\\r\\nif (empty($tplOuter)) {\\r\\n\\t$modx->toPlaceholders($outer);\\r\\n}\\r\\nelse {\\r\\n\\treturn $pdoFetch->getChunk($tplOuter, $outer);\\r\\n}"}',
        'guid' => 'e4684a7bbeb8acbdd528ebbdbbf9bcd2',
        'native_key' => 0,
        'signature' => 'b2e412d524f785cd12d68f5d3b3f31c2',
      ),
      'c830432d4653941c6875286c719c2b06' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"msProductOptions","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n$output = \'\';\\r\\n\\r\\nif (empty($product) && !empty($input)) {$product = $input;}\\r\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\n$options = explode(\\",\\",$modx->getOption(\'options\',$scriptProperties,\'\'));\\r\\n\\r\\n$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n    $output = \'This resource is not instance of msProduct class.\';\\r\\n}\\r\\n\\r\\n$optionKeys = $product->getOptionKeys();\\r\\n$productData = $product->toArray();\\r\\n\\r\\n$ignoreOptions = explode(\',\', trim($modx->getOption(\'ignoreOptions\', $scriptProperties, \'\')));\\r\\n\\r\\nif (!empty($groups)) {\\r\\n    $groups = explode(\',\', trim($groups));\\r\\n    $groups = array_map(\'trim\', $groups);\\r\\n} else if ($groups === \'0\') {\\r\\n    $groups = array(0);\\r\\n}\\r\\n\\r\\n$rows = array();\\r\\nif(count($optionKeys) > 0) {\\r\\n    foreach ($optionKeys as $key) {\\r\\n        if (in_array($key, $ignoreOptions)) continue;\\r\\n        $productOption = array();\\r\\n        foreach ($productData as $dataKey => $dataValue) {\\r\\n            $dataKey = explode(\'.\', $dataKey);\\r\\n            if ($dataKey[0] == $key && (count($dataKey) > 1)) {\\r\\n                $productOption[$dataKey[1]] = $dataValue;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        \\/\\/ \\u041f\\u0440\\u043e\\u043f\\u0443\\u0441\\u043a\\u0430\\u0435\\u043c, \\u0435\\u0441\\u043b\\u0438 \\u0445\\u0430\\u0440\\u0430\\u043a\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043a\\u0430 \\u0433\\u0440\\u0443\\u043f\\u043f\\u044b \\u043d\\u0435 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u0430 \\u0432 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0435 &groups\\r\\n        if (!empty($groups) && !in_array($productOption[\'category\'], $groups) && !in_array($productOption[\'category_name\'], $groups)) continue;\\r\\n        if (isset($groups[0]) && ($groups[0] == 0) && ($productOption[\'category\'] != 0)) continue;\\r\\n\\r\\n        if (is_array($productData[$key])) {\\r\\n            $values = array();\\r\\n            foreach ($productData[$key] as $value) {\\r\\n                $params = array_merge($productData, $productOption, array(\'value\' => $value));\\r\\n                $values[] = $pdoFetch->getChunk($tplValue, $params);\\r\\n            }\\r\\n            $productOption[\'value\'] = implode($valuesSeparator, $values);\\r\\n        } else {\\r\\n            $productOption[\'value\'] = $productData[$key];\\r\\n        }\\r\\n\\r\\n        \\/\\/ \\u041f\\u0440\\u043e\\u043f\\u0443\\u0441\\u043a\\u0430\\u0435\\u043c, \\u0435\\u0441\\u043b\\u0438 \\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0443\\u0441\\u0442\\u043e\\u0435\\r\\n        if ($hideEmpty && empty($productOption[\'value\'])) continue;\\r\\n\\r\\n        $rows[] = $pdoFetch->getChunk($tplRow, array_merge($productData, $productOption));\\r\\n    }\\r\\n}\\r\\n\\r\\nif (count($rows) > 0) {\\r\\n    $rows = implode($outputSeparator, $rows);\\r\\n    $output = empty($tplOuter)\\r\\n        ? $pdoFetch->getChunk(\'\', array_merge($productData, array(\'rows\' => $rows)))\\r\\n        : $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, $productData, array(\'rows\' => $rows)));\\r\\n}\\r\\nelse{\\r\\n    $output = !empty($tplEmpty)\\r\\n        ? $pdoFetch->getChunk($tplEmpty, array_merge($scriptProperties, $productData))\\r\\n        : \'\';\\r\\n}\\r\\n\\r\\nreturn $output;","locked":0,"properties":"a:9:{s:7:\\"product\\";a:7:{s:4:\\"name\\";s:7:\\"product\\";s:4:\\"desc\\";s:16:\\"ms2_prop_product\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplRow\\";a:7:{s:4:\\"name\\";s:6:\\"tplRow\\";s:4:\\"desc\\";s:15:\\"ms2_prop_tplRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.msProductOptions.row\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:26:\\"tpl.msProductOptions.outer\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"valuesSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"valuesSeparator\\";s:4:\\"desc\\";s:24:\\"ms2_prop_valuesSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\", \\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:24:\\"ms2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"ignoreOptions\\";a:7:{s:4:\\"name\\";s:13:\\"ignoreOptions\\";s:4:\\"desc\\";s:22:\\"ms2_prop_ignoreOptions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"hideEmpty\\";a:7:{s:4:\\"name\\";s:9:\\"hideEmpty\\";s:4:\\"desc\\";s:18:\\"ms2_prop_hideEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"groups\\";a:7:{s:4:\\"name\\";s:6:\\"groups\\";s:4:\\"desc\\";s:15:\\"ms2_prop_groups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplValue\\";a:7:{s:4:\\"name\\";s:8:\\"tplValue\\";s:4:\\"desc\\";s:17:\\"ms2_prop_tplValue\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"@INLINE [[+value]]\\";s:7:\\"lexicon\\";s:20:\\"minishop2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/snippets\\/snippet.ms_product_options.php","content":"\\/* @var array $scriptProperties *\\/\\r\\n\\/* @var miniShop2 $miniShop2 *\\/\\r\\n$miniShop2 = $modx->getService(\'minishop2\');\\r\\n$miniShop2->initialize($modx->context->key);\\r\\n\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\nif (!$modx->loadClass(\'pdofetch\', MODX_CORE_PATH . \'components\\/pdotools\\/model\\/pdotools\\/\', false, true)) {return false;}\\r\\n$pdoFetch = new pdoFetch($modx, $scriptProperties);\\r\\n\\r\\n$output = \'\';\\r\\n\\r\\nif (empty($product) && !empty($input)) {$product = $input;}\\r\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\r\\n$options = explode(\\",\\",$modx->getOption(\'options\',$scriptProperties,\'\'));\\r\\n\\r\\n$product = !empty($product) ? $modx->getObject(\'msProduct\', $product) : $product = $modx->resource;\\r\\nif (!($product instanceof msProduct)) {\\r\\n    $output = \'This resource is not instance of msProduct class.\';\\r\\n}\\r\\n\\r\\n$optionKeys = $product->getOptionKeys();\\r\\n$productData = $product->toArray();\\r\\n\\r\\n$ignoreOptions = explode(\',\', trim($modx->getOption(\'ignoreOptions\', $scriptProperties, \'\')));\\r\\n\\r\\nif (!empty($groups)) {\\r\\n    $groups = explode(\',\', trim($groups));\\r\\n    $groups = array_map(\'trim\', $groups);\\r\\n} else if ($groups === \'0\') {\\r\\n    $groups = array(0);\\r\\n}\\r\\n\\r\\n$rows = array();\\r\\nif(count($optionKeys) > 0) {\\r\\n    foreach ($optionKeys as $key) {\\r\\n        if (in_array($key, $ignoreOptions)) continue;\\r\\n        $productOption = array();\\r\\n        foreach ($productData as $dataKey => $dataValue) {\\r\\n            $dataKey = explode(\'.\', $dataKey);\\r\\n            if ($dataKey[0] == $key && (count($dataKey) > 1)) {\\r\\n                $productOption[$dataKey[1]] = $dataValue;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        \\/\\/ \\u041f\\u0440\\u043e\\u043f\\u0443\\u0441\\u043a\\u0430\\u0435\\u043c, \\u0435\\u0441\\u043b\\u0438 \\u0445\\u0430\\u0440\\u0430\\u043a\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043a\\u0430 \\u0433\\u0440\\u0443\\u043f\\u043f\\u044b \\u043d\\u0435 \\u0443\\u043a\\u0430\\u0437\\u0430\\u043d\\u0430 \\u0432 \\u043f\\u0430\\u0440\\u0430\\u043c\\u0435\\u0442\\u0440\\u0435 &groups\\r\\n        if (!empty($groups) && !in_array($productOption[\'category\'], $groups) && !in_array($productOption[\'category_name\'], $groups)) continue;\\r\\n        if (isset($groups[0]) && ($groups[0] == 0) && ($productOption[\'category\'] != 0)) continue;\\r\\n\\r\\n        if (is_array($productData[$key])) {\\r\\n            $values = array();\\r\\n            foreach ($productData[$key] as $value) {\\r\\n                $params = array_merge($productData, $productOption, array(\'value\' => $value));\\r\\n                $values[] = $pdoFetch->getChunk($tplValue, $params);\\r\\n            }\\r\\n            $productOption[\'value\'] = implode($valuesSeparator, $values);\\r\\n        } else {\\r\\n            $productOption[\'value\'] = $productData[$key];\\r\\n        }\\r\\n\\r\\n        \\/\\/ \\u041f\\u0440\\u043e\\u043f\\u0443\\u0441\\u043a\\u0430\\u0435\\u043c, \\u0435\\u0441\\u043b\\u0438 \\u0437\\u043d\\u0430\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u0443\\u0441\\u0442\\u043e\\u0435\\r\\n        if ($hideEmpty && empty($productOption[\'value\'])) continue;\\r\\n\\r\\n        $rows[] = $pdoFetch->getChunk($tplRow, array_merge($productData, $productOption));\\r\\n    }\\r\\n}\\r\\n\\r\\nif (count($rows) > 0) {\\r\\n    $rows = implode($outputSeparator, $rows);\\r\\n    $output = empty($tplOuter)\\r\\n        ? $pdoFetch->getChunk(\'\', array_merge($productData, array(\'rows\' => $rows)))\\r\\n        : $pdoFetch->getChunk($tplOuter, array_merge($scriptProperties, $productData, array(\'rows\' => $rows)));\\r\\n}\\r\\nelse{\\r\\n    $output = !empty($tplEmpty)\\r\\n        ? $pdoFetch->getChunk($tplEmpty, array_merge($scriptProperties, $productData))\\r\\n        : \'\';\\r\\n}\\r\\n\\r\\nreturn $output;"}',
        'guid' => 'd41b3df804d8d65be3bef7269e48f957',
        'native_key' => 0,
        'signature' => '1538bd75ab5c97ac85197836da3fe693',
      ),
    ),
    'Plugins' => 
    array (
      '1d7130af595dc52e8a222b157710a892' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"miniShop2","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"switch ($modx->event->name) {\\r\\n\\r\\n\\tcase \'OnManagerPageBeforeRender\':\\r\\n\\t\\t$modx23 = !empty($modx->version) && version_compare($modx->version[\'full_version\'], \'2.3.0\', \'>=\');\\r\\n\\t\\t$modx->controller->addHtml(\'<script type=\\"text\\/javascript\\">\\r\\n\\t\\t\\tExt.onReady(function() {\\r\\n\\t\\t\\t\\tMODx.modx23 = \'.(int)$modx23.\';\\r\\n\\t\\t\\t});\\r\\n\\t\\t<\\/script>\');\\r\\n\\t\\tif (!$modx23) {\\r\\n\\t\\t\\t$modx->controller->addCss(MODX_ASSETS_URL . \'components\\/minishop2\\/css\\/mgr\\/bootstrap.min.css\');\\r\\n\\t\\t}\\r\\n\\t\\t$modx->controller->addCss(MODX_ASSETS_URL . \'components\\/minishop2\\/css\\/mgr\\/main.css\');\\r\\n\\t\\tbreak;\\r\\n\\r\\n\\tcase \'OnHandleRequest\':\\r\\n\\tcase \'OnLoadWebDocument\':\\r\\n\\t\\t$isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\r\\n\\r\\n\\t\\tif (empty($_REQUEST[\'ms2_action\']) || ($isAjax && $modx->event->name != \'OnHandleRequest\') || (!$isAjax && $modx->event->name != \'OnLoadWebDocument\')) {return;}\\r\\n\\t\\t$action = trim($_REQUEST[\'ms2_action\']);\\r\\n\\t\\t$ctx = !empty($_REQUEST[\'ctx\']) ? (string) $_REQUEST[\'ctx\'] : \'web\';\\r\\n\\t\\tif ($ctx != \'web\') {$modx->switchContext($ctx);}\\r\\n\\r\\n\\t\\t\\/* @var miniShop2 $miniShop2 *\\/\\r\\n\\t\\t$miniShop2 = $modx->getService(\'minishop2\');\\r\\n\\t\\t$miniShop2->initialize($ctx, array(\'json_response\' => $isAjax));\\r\\n\\t\\tif (!($miniShop2 instanceof miniShop2)) {\\r\\n\\t\\t\\t@session_write_close();\\r\\n\\t\\t\\texit(\'Could not initialize miniShop2\');\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tswitch ($action) {\\r\\n\\t\\t\\tcase \'cart\\/add\': $response = $miniShop2->cart->add(@$_POST[\'id\'], @$_POST[\'count\'], @$_POST[\'options\']); break;\\r\\n\\t\\t\\tcase \'cart\\/change\': $response = $miniShop2->cart->change(@$_POST[\'key\'], @$_POST[\'count\']); break;\\r\\n\\t\\t\\tcase \'cart\\/remove\': $response = $miniShop2->cart->remove(@$_POST[\'key\']); break;\\r\\n\\t\\t\\tcase \'cart\\/clean\': $response = $miniShop2->cart->clean(); break;\\r\\n\\t\\t\\tcase \'cart\\/get\': $response = $miniShop2->cart->get(); break;\\r\\n\\t\\t\\tcase \'order\\/add\': $response = $miniShop2->order->add(@$_POST[\'key\'], @$_POST[\'value\']); break;\\r\\n\\t\\t\\tcase \'order\\/submit\': $response = $miniShop2->order->submit($_POST); break;\\r\\n\\t\\t\\tcase \'order\\/getcost\': $response = $miniShop2->order->getcost(); break;\\r\\n\\t\\t\\tcase \'order\\/getrequired\': $response = $miniShop2->order->getDeliveryRequiresFields(@$_POST[\'id\']); break;\\r\\n\\t\\t\\tcase \'order\\/clean\': $response = $miniShop2->order->clean(); break;\\r\\n\\t\\t\\tcase \'order\\/get\': $response = $miniShop2->order->get(); break;\\r\\n\\t\\t\\tdefault:\\r\\n\\t\\t\\t\\t$message = ($_REQUEST[\'ms2_action\'] != $action)\\r\\n\\t\\t\\t\\t\\t? \'ms2_err_register_globals\'\\r\\n\\t\\t\\t\\t\\t: \'ms2_err_unknown\';\\r\\n\\t\\t\\t\\t$response = $miniShop2->error($message);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tif ($isAjax) {\\r\\n\\t\\t\\t@session_write_close();\\r\\n\\t\\t\\texit($response);\\r\\n\\t\\t}\\r\\n\\t\\tbreak;\\r\\n\\r\\n\\tcase \'OnWebPageInit\':\\r\\n\\t\\t\\/* @var msCustomerProfile $profile *\\/\\r\\n\\t\\t$referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);\\r\\n\\t\\t$cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\r\\n\\t\\t$cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\r\\n\\r\\n\\t\\tif (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {\\r\\n\\t\\t\\t$code = trim($_REQUEST[$referrerVar]);\\r\\n\\t\\t\\tif ($profile = $modx->getObject(\'msCustomerProfile\', array(\'referrer_code\' => $code))) {\\r\\n\\t\\t\\t\\t$referrer = $profile->id;\\r\\n\\t\\t\\t\\tsetcookie($cookieVar, $referrer, time() + $cookieTime);\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\telseif ($modx->user->isAuthenticated() && !empty($_COOKIE[$cookieVar])) {\\r\\n\\t\\t\\tif ($profile = $modx->getObject(\'msCustomerProfile\', $modx->user->id)) {\\r\\n\\t\\t\\t\\tif (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $modx->user->id) {\\r\\n\\t\\t\\t\\t\\t$profile->set(\'referrer_id\', $_COOKIE[$cookieVar]);\\r\\n\\t\\t\\t\\t\\t$profile->save();\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tsetcookie($cookieVar, \'\', time() - $cookieTime);\\r\\n\\t\\t}\\r\\n\\t\\tbreak;\\r\\n\\r\\n\\tcase \'msOnChangeOrderStatus\':\\r\\n\\t\\tif (empty($status) || $status != 2) {return;}\\r\\n\\r\\n\\t\\t\\/** @var modUser $user *\\/\\r\\n\\t\\tif ($user = $order->getOne(\'User\')) {\\r\\n\\t\\t\\t$q = $modx->newQuery(\'msOrder\', array(\'type\' => 0));\\r\\n\\t\\t\\t$q->innerJoin(\'modUser\', \'modUser\', array(\'`modUser`.`id` = `msOrder`.`user_id`\'));\\r\\n\\t\\t\\t$q->innerJoin(\'msOrderLog\', \'msOrderLog\', array(\\r\\n\\t\\t\\t\\t\'`msOrderLog`.`order_id` = `msOrder`.`id`\',\\r\\n\\t\\t\\t\\t\'msOrderLog.action\' => \'status\',\\r\\n\\t\\t\\t\\t\'msOrderLog.entry\' => $status,\\r\\n\\t\\t\\t));\\r\\n\\t\\t\\t$q->where(array(\'msOrder.user_id\' => $user->id));\\r\\n\\t\\t\\t$q->groupby(\'msOrder.user_id\');\\r\\n\\t\\t\\t$q->select(\'SUM(`msOrder`.`cost`)\');\\r\\n\\t\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\r\\n\\t\\t\\t\\t$spent = $q->stmt->fetch(PDO::FETCH_COLUMN);\\r\\n\\t\\t\\t\\t\\/** @var msCustomerProfile $profile *\\/\\r\\n\\t\\t\\t\\tif ($profile = $modx->getObject(\'msCustomerProfile\', $user->id)) {\\r\\n\\t\\t\\t\\t\\t$profile->set(\'spent\', $spent);\\r\\n\\t\\t\\t\\t\\t$profile->save();\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\tbreak;\\r\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/minishop2\\/elements\\/plugins\\/plugin.minishop2.php","content":"switch ($modx->event->name) {\\r\\n\\r\\n\\tcase \'OnManagerPageBeforeRender\':\\r\\n\\t\\t$modx23 = !empty($modx->version) && version_compare($modx->version[\'full_version\'], \'2.3.0\', \'>=\');\\r\\n\\t\\t$modx->controller->addHtml(\'<script type=\\"text\\/javascript\\">\\r\\n\\t\\t\\tExt.onReady(function() {\\r\\n\\t\\t\\t\\tMODx.modx23 = \'.(int)$modx23.\';\\r\\n\\t\\t\\t});\\r\\n\\t\\t<\\/script>\');\\r\\n\\t\\tif (!$modx23) {\\r\\n\\t\\t\\t$modx->controller->addCss(MODX_ASSETS_URL . \'components\\/minishop2\\/css\\/mgr\\/bootstrap.min.css\');\\r\\n\\t\\t}\\r\\n\\t\\t$modx->controller->addCss(MODX_ASSETS_URL . \'components\\/minishop2\\/css\\/mgr\\/main.css\');\\r\\n\\t\\tbreak;\\r\\n\\r\\n\\tcase \'OnHandleRequest\':\\r\\n\\tcase \'OnLoadWebDocument\':\\r\\n\\t\\t$isAjax = !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\r\\n\\r\\n\\t\\tif (empty($_REQUEST[\'ms2_action\']) || ($isAjax && $modx->event->name != \'OnHandleRequest\') || (!$isAjax && $modx->event->name != \'OnLoadWebDocument\')) {return;}\\r\\n\\t\\t$action = trim($_REQUEST[\'ms2_action\']);\\r\\n\\t\\t$ctx = !empty($_REQUEST[\'ctx\']) ? (string) $_REQUEST[\'ctx\'] : \'web\';\\r\\n\\t\\tif ($ctx != \'web\') {$modx->switchContext($ctx);}\\r\\n\\r\\n\\t\\t\\/* @var miniShop2 $miniShop2 *\\/\\r\\n\\t\\t$miniShop2 = $modx->getService(\'minishop2\');\\r\\n\\t\\t$miniShop2->initialize($ctx, array(\'json_response\' => $isAjax));\\r\\n\\t\\tif (!($miniShop2 instanceof miniShop2)) {\\r\\n\\t\\t\\t@session_write_close();\\r\\n\\t\\t\\texit(\'Could not initialize miniShop2\');\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tswitch ($action) {\\r\\n\\t\\t\\tcase \'cart\\/add\': $response = $miniShop2->cart->add(@$_POST[\'id\'], @$_POST[\'count\'], @$_POST[\'options\']); break;\\r\\n\\t\\t\\tcase \'cart\\/change\': $response = $miniShop2->cart->change(@$_POST[\'key\'], @$_POST[\'count\']); break;\\r\\n\\t\\t\\tcase \'cart\\/remove\': $response = $miniShop2->cart->remove(@$_POST[\'key\']); break;\\r\\n\\t\\t\\tcase \'cart\\/clean\': $response = $miniShop2->cart->clean(); break;\\r\\n\\t\\t\\tcase \'cart\\/get\': $response = $miniShop2->cart->get(); break;\\r\\n\\t\\t\\tcase \'order\\/add\': $response = $miniShop2->order->add(@$_POST[\'key\'], @$_POST[\'value\']); break;\\r\\n\\t\\t\\tcase \'order\\/submit\': $response = $miniShop2->order->submit($_POST); break;\\r\\n\\t\\t\\tcase \'order\\/getcost\': $response = $miniShop2->order->getcost(); break;\\r\\n\\t\\t\\tcase \'order\\/getrequired\': $response = $miniShop2->order->getDeliveryRequiresFields(@$_POST[\'id\']); break;\\r\\n\\t\\t\\tcase \'order\\/clean\': $response = $miniShop2->order->clean(); break;\\r\\n\\t\\t\\tcase \'order\\/get\': $response = $miniShop2->order->get(); break;\\r\\n\\t\\t\\tdefault:\\r\\n\\t\\t\\t\\t$message = ($_REQUEST[\'ms2_action\'] != $action)\\r\\n\\t\\t\\t\\t\\t? \'ms2_err_register_globals\'\\r\\n\\t\\t\\t\\t\\t: \'ms2_err_unknown\';\\r\\n\\t\\t\\t\\t$response = $miniShop2->error($message);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tif ($isAjax) {\\r\\n\\t\\t\\t@session_write_close();\\r\\n\\t\\t\\texit($response);\\r\\n\\t\\t}\\r\\n\\t\\tbreak;\\r\\n\\r\\n\\tcase \'OnWebPageInit\':\\r\\n\\t\\t\\/* @var msCustomerProfile $profile *\\/\\r\\n\\t\\t$referrerVar = $modx->getOption(\'ms2_referrer_code_var\', null, \'msfrom\', true);\\r\\n\\t\\t$cookieVar = $modx->getOption(\'ms2_referrer_cookie_var\', null, \'msreferrer\', true);\\r\\n\\t\\t$cookieTime = $modx->getOption(\'ms2_referrer_time\', null, 86400 * 365, true);\\r\\n\\r\\n\\t\\tif (!$modx->user->isAuthenticated() && !empty($_REQUEST[$referrerVar])) {\\r\\n\\t\\t\\t$code = trim($_REQUEST[$referrerVar]);\\r\\n\\t\\t\\tif ($profile = $modx->getObject(\'msCustomerProfile\', array(\'referrer_code\' => $code))) {\\r\\n\\t\\t\\t\\t$referrer = $profile->id;\\r\\n\\t\\t\\t\\tsetcookie($cookieVar, $referrer, time() + $cookieTime);\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\telseif ($modx->user->isAuthenticated() && !empty($_COOKIE[$cookieVar])) {\\r\\n\\t\\t\\tif ($profile = $modx->getObject(\'msCustomerProfile\', $modx->user->id)) {\\r\\n\\t\\t\\t\\tif (!$profile->get(\'referrer_id\') && $_COOKIE[$cookieVar] != $modx->user->id) {\\r\\n\\t\\t\\t\\t\\t$profile->set(\'referrer_id\', $_COOKIE[$cookieVar]);\\r\\n\\t\\t\\t\\t\\t$profile->save();\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tsetcookie($cookieVar, \'\', time() - $cookieTime);\\r\\n\\t\\t}\\r\\n\\t\\tbreak;\\r\\n\\r\\n\\tcase \'msOnChangeOrderStatus\':\\r\\n\\t\\tif (empty($status) || $status != 2) {return;}\\r\\n\\r\\n\\t\\t\\/** @var modUser $user *\\/\\r\\n\\t\\tif ($user = $order->getOne(\'User\')) {\\r\\n\\t\\t\\t$q = $modx->newQuery(\'msOrder\', array(\'type\' => 0));\\r\\n\\t\\t\\t$q->innerJoin(\'modUser\', \'modUser\', array(\'`modUser`.`id` = `msOrder`.`user_id`\'));\\r\\n\\t\\t\\t$q->innerJoin(\'msOrderLog\', \'msOrderLog\', array(\\r\\n\\t\\t\\t\\t\'`msOrderLog`.`order_id` = `msOrder`.`id`\',\\r\\n\\t\\t\\t\\t\'msOrderLog.action\' => \'status\',\\r\\n\\t\\t\\t\\t\'msOrderLog.entry\' => $status,\\r\\n\\t\\t\\t));\\r\\n\\t\\t\\t$q->where(array(\'msOrder.user_id\' => $user->id));\\r\\n\\t\\t\\t$q->groupby(\'msOrder.user_id\');\\r\\n\\t\\t\\t$q->select(\'SUM(`msOrder`.`cost`)\');\\r\\n\\t\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\r\\n\\t\\t\\t\\t$spent = $q->stmt->fetch(PDO::FETCH_COLUMN);\\r\\n\\t\\t\\t\\t\\/** @var msCustomerProfile $profile *\\/\\r\\n\\t\\t\\t\\tif ($profile = $modx->getObject(\'msCustomerProfile\', $user->id)) {\\r\\n\\t\\t\\t\\t\\t$profile->set(\'spent\', $spent);\\r\\n\\t\\t\\t\\t\\t$profile->save();\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\tbreak;\\r\\n}"}',
        'guid' => '93fc5ab5883944f45a68367f22a76654',
        'native_key' => 0,
        'signature' => '7417438c93e527b27f1347d86b26711b',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '0ffe401ed2cd206b180c93d082361c5b' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnManagerPageBeforeRender","priority":0,"propertyset":0}',
              'guid' => 'f183002a1228b49c890177b6212e0822',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnManagerPageBeforeRender',
              ),
              'signature' => '67d875743e6a86c9b3a73290b90f8eb5',
            ),
            '1a166eded8aca94b53ada180c9685d35' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPageInit","priority":0,"propertyset":0}',
              'guid' => 'dd82d8c1e2a741a52d63e841c41581e4',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPageInit',
              ),
              'signature' => 'f309b9696e0d5f301c7c08b76de42d85',
            ),
            'e32a46daf4fc2e45a7d05feaf6204db8' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnHandleRequest","priority":0,"propertyset":0}',
              'guid' => 'fb40b5199cbf3d87110f982298c99abd',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnHandleRequest',
              ),
              'signature' => 'e446fd4d83c33480188ef81c13f45ee2',
            ),
            '769df7e19752a77852f17dc0cf769361' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnLoadWebDocument","priority":0,"propertyset":0}',
              'guid' => '894999b6cd0565f10e4505699ea796d4',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnLoadWebDocument',
              ),
              'signature' => 'b6803abfa9695806acc5265bf6bb4fad',
            ),
            '89160fec83d7b201c19de1b00362c61b' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"msOnChangeOrderStatus","priority":0,"propertyset":0}',
              'guid' => 'd3a06ef8148ed99599744c13bfd040d4',
              'native_key' => 
              array (
                0 => 0,
                1 => 'msOnChangeOrderStatus',
              ),
              'signature' => '4ba427e38482003872d8a0c336e18a9a',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'minishop2',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"minishop2"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"minishop2"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.extension.resolver","type":"php","name":"resolve.extension"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.policy.resolver","type":"php","name":"resolve.policy"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.sources.resolver","type":"php","name":"resolve.sources"}',
    ),
    6 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.settings.resolver","type":"php","name":"resolve.settings"}',
    ),
    7 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.update.resolver","type":"php","name":"resolve.update"}',
    ),
    8 => 
    array (
      'type' => 'php',
      'body' => '{"source":"minishop2-2.2.0-pl2\\/modCategory\\/d12c340d640aaa19cad42879b2687ee9.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '014a876c21020ff4739ca29b900beeb9',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => 'd12c340d640aaa19cad42879b2687ee9',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"miniShop2"}',
);